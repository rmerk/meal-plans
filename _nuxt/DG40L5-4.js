import{g as V,y as E,h as O,c as v,q as B,z as U,s as W,M as J,N as Q,d as u,j as s,e as b,F as k,l as $,f as n,k as l,i as F,w as T,_ as Y,o as c,b as P,m as g,p as G}from"./BnF1ulIC.js";import{_ as K}from"./CTTd6LNy.js";import{u as A,q}from"./DQ63w9E6.js";import{u as X}from"./BcOy_1jZ.js";import"./Ctp3-J01.js";const Z={"aria-label":"Breadcrumb",class:"mb-4"},ee={class:"flex items-center space-x-2 text-sm"},te={key:1,class:"text-gray-500 dark:text-gray-400 font-semibold"},se={key:2,class:"mx-2 text-gray-400"},ae={class:"mb-8"},ne={class:"text-8xl text-center mb-6"},ie={class:"text-4xl font-bold text-center mb-4"},le={class:"flex flex-wrap justify-center gap-4 text-sm text-gray-600 dark:text-gray-400 mb-4"},re={class:"capitalize"},oe={class:"flex justify-center mb-6"},ce={class:"flex justify-center"},ue={class:"mb-8"},pe={class:"space-y-2"},me={key:0,class:"font-mono"},de={class:"mb-8"},ve={class:"list-decimal list-inside space-y-3 prose dark:prose-invert max-w-none"},fe={key:0,class:"mb-8"},xe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},ge={class:"text-center"},ye={class:"text-2xl font-bold text-primary"},he={class:"text-center"},_e={class:"text-2xl font-bold text-primary"},be={class:"text-center"},ke={class:"text-2xl font-bold text-primary"},$e={class:"text-center"},Te={class:"text-2xl font-bold text-primary"},we={key:1,class:"mb-8"},Ce={class:"flex flex-wrap gap-2"},Fe=V({__name:"[slug]",async setup(Se){let m,y;const R=E(),w=O(),p=v(()=>R.params.week),h=v(()=>R.params.slug),{data:t}=([m,y]=B(async()=>A(`recipe-${p.value}-${h.value}`,async()=>(await q("meals").all()).find(i=>i.path?.includes(`${p.value}/recipes/${h.value}`))||null)),m=await m,y(),m);if(!t.value)throw U({statusCode:404,message:"Recipe not found"});const I=v(()=>{if(!t.value?.body?.children)return[];const a=t.value.body.children;let e=!1;const i=[];for(const o of a){if(o.type==="element"&&o.tag==="h2"&&(o.children?.[0]?.value||"").toLowerCase().includes("instruction")){e=!0;continue}if(e&&o.type==="element"&&o.tag==="ol"){if(o.children&&Array.isArray(o.children)){for(const f of o.children)if(f.type==="element"&&f.tag==="li"){const r=M(f);r&&i.push(r)}}break}}return i});function M(a){return a?typeof a=="string"?a:a.type==="text"&&a.value?a.value:a.children&&Array.isArray(a.children)?a.children.map(e=>M(e)).filter(Boolean).join(" "):"":""}W({title:`${t.value.title} | Meal Plans`,description:`${t.value.title} - ${t.value.meta.prepTime} prep, ${t.value.meta.cookTime} cook, serves ${t.value.meta.servings}. ${t.value.meta.difficulty} recipe.`,ogTitle:t.value.title,ogDescription:`Delicious ${t.value.meta.mealType} recipe serving ${t.value.meta.servings}`,ogType:"article",ogImage:"/og-default.jpg",twitterCard:"summary_large_image"});const C=a=>{if(!a)return"PT0M";const e=a.match(/(\d+)\s*(min|minute|minutes|hour|hours|hr|hrs)/i);if(!e)return"PT0M";const i=e[1],o=e[2].toLowerCase();return o.includes("hour")||o==="hr"||o==="hrs"?`PT${i}H`:`PT${i}M`},z=v(()=>({"@context":"https://schema.org","@type":"Recipe",name:t.value?.title,description:`${t.value?.meta.mealType} recipe serving ${t.value?.meta.servings} people`,prepTime:C(t.value?.meta.prepTime),cookTime:C(t.value?.meta.cookTime),totalTime:C(t.value?.meta.totalTime),recipeYield:`${t.value?.meta.servings} servings`,recipeIngredient:t.value?.meta.ingredients||[],recipeInstructions:I.value.map((a,e)=>({"@type":"HowToStep",name:`Step ${e+1}`,text:a})),nutrition:t.value?.meta.nutrition?{"@type":"NutritionInformation",calories:`${t.value.meta.nutrition.calories} calories`,proteinContent:`${t.value.meta.nutrition.protein}g`,carbohydrateContent:`${t.value.meta.nutrition.carbs}g`,fatContent:`${t.value.meta.nutrition.fat}g`}:void 0}));J({script:[{type:"application/ld+json",children:JSON.stringify(z.value)}]});const H=()=>{w.push({path:"/tools/cooking-mode",query:{recipe:h.value}})},N=v(()=>[{label:"Home",path:"/",active:!1},{label:`Week ${p.value.replace("week-","")}`,path:`/meals/${p.value}`,active:!1},{label:"Recipes",path:`/meals/${p.value}/recipes`,active:!1},{label:t.value?.title||"Recipe",path:"",active:!0}]),L=v(()=>({breakfast:"amber",lunch:"green",dinner:"primary",snack:"secondary"})[t.value?.meta.mealType]||"primary"),S=a=>{const e=a.match(/^([\d\s\/.-]+(?:lbs?|oz|ounces?|cups?|tbsp|tablespoons?|tsp|teaspoons?|g|grams?|kg|ml|liters?|l)?)\s/);return e?e[1]:""},D=a=>{const e=S(a);return e?a.substring(e.length).trim():a},j=Q(null),{data:d}=([m,y]=B(async()=>A(`recipes-${p.value}`,async()=>(await q("meals").all()).filter(i=>i.path?.includes(`${p.value}/recipes/`)&&!i.path.endsWith("/recipes/")))),m=await m,y(),m),_=v(()=>!d.value||d.value.length===0?-1:d.value.findIndex(a=>a._path.includes(h.value)));return X(j,{threshold:50,onSwipeEnd:a=>{if(!(!d.value||d.value.length===0)){if(a.direction==="left"&&_.value<d.value.length-1){const i=d.value[_.value+1]._path.split("/").pop()?.replace(".md","");i&&w.push(`/meals/${p.value}/recipes/${i}`)}else if(a.direction==="right"&&_.value>0){const i=d.value[_.value-1]._path.split("/").pop()?.replace(".md","");i&&w.push(`/meals/${p.value}/recipes/${i}`)}}}}),(a,e)=>{const i=G,o=K,f=Y;return c(),u("div",{ref_key:"recipeContainerRef",ref:j,class:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 max-w-3xl"},[s("nav",Z,[s("ol",ee,[(c(!0),u(k,null,$(n(N),(r,x)=>(c(),u("li",{key:x,class:"flex items-center"},[r.active?(c(),u("span",te,l(r.label),1)):(c(),P(i,{key:0,to:r.path,class:"text-primary hover:underline"},{default:T(()=>[g(l(r.label),1)]),_:2},1032,["to"])),x<n(N).length-1?(c(),u("span",se,">")):b("",!0)]))),128))])]),s("div",ae,[s("div",ne,l(n(t)?.meta.emoji),1),s("h1",ie,l(n(t)?.title),1),s("div",le,[s("span",null,"Serves "+l(n(t)?.meta.servings),1),e[0]||(e[0]=s("span",null,"•",-1)),s("span",null,"Prep: "+l(n(t)?.meta.prepTime),1),e[1]||(e[1]=s("span",null,"•",-1)),s("span",null,"Cook: "+l(n(t)?.meta.cookTime),1),e[2]||(e[2]=s("span",null,"•",-1)),s("span",null,"Total: "+l(n(t)?.meta.totalTime),1),e[3]||(e[3]=s("span",null,"•",-1)),s("span",re,l(n(t)?.meta.difficulty),1)]),s("div",oe,[F(o,{color:n(L),variant:"subtle",size:"lg"},{default:T(()=>[g(l(n(t)?.meta.mealType),1)]),_:1},8,["color"])]),s("div",ce,[F(f,{onClick:H,color:"primary",size:"lg",icon:"i-heroicons-fire"},{default:T(()=>[...e[4]||(e[4]=[g(" Start Cooking Mode ",-1)])]),_:1})])]),s("section",ue,[e[6]||(e[6]=s("h2",{class:"text-2xl font-bold mb-4"}," Ingredients ",-1)),s("ul",pe,[(c(!0),u(k,null,$(n(t)?.meta.ingredients,(r,x)=>(c(),u("li",{key:x,class:"flex items-start"},[e[5]||(e[5]=s("span",{class:"mr-2"},"•",-1)),s("span",null,[S(r)?(c(),u("span",me,l(S(r)),1)):b("",!0),g(" "+l(D(r)),1)])]))),128))])]),s("section",de,[e[7]||(e[7]=s("h2",{class:"text-2xl font-bold mb-4"}," Instructions ",-1)),s("ol",ve,[(c(!0),u(k,null,$(n(I),(r,x)=>(c(),u("li",{key:x,class:"leading-relaxed"},l(r),1))),128))])]),n(t)?.meta.nutrition?(c(),u("section",fe,[e[12]||(e[12]=s("h2",{class:"text-2xl font-bold mb-4"}," Nutrition ",-1)),s("div",xe,[s("div",ge,[s("div",ye,l(n(t).meta.nutrition.calories),1),e[8]||(e[8]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Calories ",-1))]),s("div",he,[s("div",_e,l(n(t).meta.nutrition.protein)+"g ",1),e[9]||(e[9]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Protein ",-1))]),s("div",be,[s("div",ke,l(n(t).meta.nutrition.carbs)+"g ",1),e[10]||(e[10]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Carbs ",-1))]),s("div",$e,[s("div",Te,l(n(t).meta.nutrition.fat)+"g ",1),e[11]||(e[11]=s("div",{class:"text-sm text-gray-600 dark:text-gray-400"}," Fat ",-1))])])])):b("",!0),n(t)?.meta.tags&&n(t).meta.tags.length>0?(c(),u("section",we,[e[13]||(e[13]=s("h2",{class:"text-2xl font-bold mb-4"}," Tags ",-1)),s("div",Ce,[(c(!0),u(k,null,$(n(t).meta.tags,r=>(c(),P(o,{key:r,variant:"subtle"},{default:T(()=>[g(l(r),1)]),_:2},1024))),128))])])):b("",!0)],512)}}});export{Fe as default};
