<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#d4735e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Recipe Library - Browse All Recipes</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script src="mobile-utils.js"></script>
    <link rel="stylesheet" href="/dark-mode.css">
    <link rel="stylesheet" href="/landscape.css">
    <style>
        body { font-family: 'Inter', sans-serif; }

        /* Custom terracotta/orange color palette */
        :root {
            --terracotta: #d4735e;
            --terracotta-dark: #b85c47;
            --warm-orange: #e88d67;
        }

        .bg-terracotta { background-color: var(--terracotta); }
        .text-terracotta { color: var(--terracotta); }
        .border-terracotta { border-color: var(--terracotta); }

        .hero-gradient {
            background: linear-gradient(135deg, #d4735e 0%, #e88d67 50%, #ffa07a 100%);
        }

        /* Mobile optimizations */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        button, a, input, label {
            touch-action: manipulation;
        }

        /* Safe area insets for iPhone notch */
        nav.sticky {
            padding-top: env(safe-area-inset-top);
        }

        .fixed.bottom-0 {
            padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
        }

        /* Animations for toast/notifications */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slide-up {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in { animation: fade-in 0.3s ease-out; }
        .animate-fade-out { animation: fade-out 0.3s ease-out; }
        .animate-slide-up { animation: slide-up 0.4s ease-out; }

        .search-bar {
            transition: all 0.3s ease;
        }

        .search-bar:focus {
            box-shadow: 0 0 0 3px rgba(212, 115, 94, 0.1);
            border-color: var(--terracotta);
        }

        .recipe-card {
            transition: all 0.3s ease;
        }

        .recipe-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(212, 115, 94, 0.15);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
    </style>
    <script src="meals/plans.js"></script>
</head>
<body class="bg-gradient-to-br from-orange-50 via-amber-50 to-rose-50 min-h-screen antialiased">

    <!-- Header -->
    <header class="hero-gradient shadow-xl">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
            <div class="text-center">
                <div class="inline-block mb-4">
                    <span class="text-5xl">üìñ</span>
                </div>
                <h1 class="text-4xl sm:text-5xl font-extrabold text-white tracking-tight mb-3">
                    Recipe Library
                </h1>
                <p class="text-xl text-white/95 max-w-2xl mx-auto mb-6 font-light">
                    Explore our complete collection of delicious, high-protein recipes
                </p>
                <a href="index.html" class="inline-flex items-center px-6 py-3 bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white font-semibold rounded-xl transition-all duration-200 border-2 border-white/40">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Dashboard
                </a>
            </div>
        </div>

        <!-- Wave separator -->
        <div class="absolute bottom-0 left-0 right-0">
            <svg viewBox="0 0 1440 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full">
                <path d="M0 0L60 8C120 16 240 32 360 37.3C480 43 600 37 720 34.7C840 32 960 32 1080 37.3C1200 43 1320 53 1380 58.7L1440 64V80H1380C1320 80 1200 80 1080 80C960 80 840 80 720 80C600 80 480 80 360 80C240 80 120 80 60 80H0V0Z" fill="#fef7f5" fill-opacity="0.9"/>
            </svg>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Search Bar -->
        <div class="mb-10">
            <div class="bg-white rounded-2xl shadow-lg p-6 border-2 border-orange-100">
                <div class="flex items-center mb-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-rose-500 flex items-center justify-center shadow-md mr-3">
                        <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                    </div>
                    <h2 class="text-xl font-bold text-slate-800">Find Your Perfect Recipe</h2>
                </div>
                <div class="relative">
                    <input
                        type="text"
                        id="search"
                        placeholder="Search by name, protein type, cuisine, or meal..."
                        class="search-bar w-full px-5 py-4 pl-12 pr-14 border-2 border-orange-100 rounded-xl focus:outline-none text-slate-700 placeholder-slate-400"
                        oninput="filterRecipes()"
                        list="recipe-suggestions"
                        autocomplete="off"
                    >
                    <datalist id="recipe-suggestions">
                        <!-- Dynamically populated by JavaScript -->
                    </datalist>
                    <svg class="absolute left-4 top-4.5 w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <!-- Voice Search Button -->
                    <button
                        onclick="startRecipeVoiceSearch()"
                        id="voice-search-btn"
                        class="absolute right-3 top-3 w-10 h-10 flex items-center justify-center bg-gradient-to-br from-orange-500 to-rose-500 hover:from-orange-600 hover:to-rose-600 text-white rounded-lg transition-all duration-200 shadow-md hover:shadow-lg active:scale-95"
                        aria-label="Voice search"
                        title="Voice search (click and speak)"
                    >
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                        </svg>
                    </button>
                </div>
                <p class="text-sm text-slate-500 mt-3">
                    <span class="font-semibold text-slate-600">üí° Try:</span> "chicken", "Korean", "breakfast", "tofu"
                </p>
            </div>
        </div>

        <!-- Recipe Directory -->
        <div id="recipe-directory" class="space-y-8">
            <!-- Dynamically generated recipe cards will go here -->
        </div>

        <!-- No Results Message -->
        <div id="no-results" class="hidden text-center py-16">
            <div class="bg-white rounded-2xl shadow-lg p-12 border-2 border-orange-100 max-w-md mx-auto">
                <div class="w-20 h-20 mx-auto mb-6 rounded-full bg-gradient-to-br from-orange-100 to-rose-100 flex items-center justify-center">
                    <svg class="w-10 h-10 text-terracotta" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-slate-800 mb-2">No recipes found</h3>
                <p class="text-slate-600">Try adjusting your search or browse all recipes below</p>
            </div>
        </div>

    </main>

    <footer class="text-center py-12 mt-16">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-center mb-4">
                <div class="text-4xl">üçΩÔ∏è</div>
            </div>
            <p class="text-slate-600 font-medium mb-1">
                Discover delicious recipes from your collection
            </p>
            <p class="text-slate-400 text-sm">
                All recipes curated for your meal prep success
            </p>
        </div>
    </footer>

    <script>
        // Comprehensive recipe data extracted from meal plans
        const recipesByPlan = {
            "Week 1 Meals": [
                { name: "Gochugaru Beef & Broccoli Bowl", type: "Lunch", servings: 4, protein: "Ground Beef", cuisine: "Korean-inspired" },
                { name: "Vietnamese-Style Chicken Salad", type: "Lunch", servings: 3, protein: "Chicken Breast", cuisine: "Vietnamese" },
                { name: "Classic Beef & Broccoli Stir-Fry", type: "Dinner", servings: 4, protein: "Flank Steak", cuisine: "Chinese" },
                { name: "Pork & Soba Noodle Stir-Fry", type: "Dinner", servings: 3, protein: "Pork Loin", cuisine: "Japanese" }
            ],
            "Week 1 Breakfasts": [
                { name: "Kimchi Scramble", type: "Breakfast", servings: 1, protein: "Eggs", cuisine: "Korean-inspired" },
                { name: "Greek Yogurt Protein Bowl", type: "Breakfast", servings: 1, protein: "Greek Yogurt", cuisine: "Greek" },
                { name: "Savory Tofu Scramble", type: "Breakfast", servings: 1, protein: "Tofu", cuisine: "American" },
                { name: "Protein Smoothie", type: "Breakfast", servings: 1, protein: "Protein Powder", cuisine: "American" }
            ],
            "Week 2 Meals": [
                { name: "Spicy Turkey 'Bibimbap' Bowl", type: "Lunch", servings: 4, protein: "Ground Turkey", cuisine: "Korean" },
                { name: "Ginger-Garlic Ground Chicken", type: "Lunch", servings: 3, protein: "Ground Chicken", cuisine: "Asian-inspired" },
                { name: "Spicy-Sweet Crispy Tofu", type: "Dinner", servings: 4, protein: "Tofu", cuisine: "Asian Fusion" },
                { name: "Ground Pork & Green Bean", type: "Dinner", servings: 3, protein: "Ground Pork", cuisine: "Chinese" }
            ],
            "Week 2 Breakfasts": [
                { name: "Egg White & Veggie Scramble", type: "Breakfast", servings: 1, protein: "Egg Whites", cuisine: "American" },
                { name: "Cottage Cheese Protein Bowl", type: "Breakfast", servings: 1, protein: "Cottage Cheese", cuisine: "American" },
                { name: "High-Protein Oatmeal", type: "Breakfast", servings: 1, protein: "Protein Powder", cuisine: "American" },
                { name: "Breakfast Burrito Bowl", type: "Breakfast", servings: 1, protein: "Eggs", cuisine: "Mexican" }
            ],
            "Week 3 Meals": [
                { name: "Teriyaki Shrimp & Vegetables", type: "Lunch", servings: 4, protein: "Shrimp", cuisine: "Japanese" },
                { name: "Green Curry Chicken", type: "Lunch", servings: 3, protein: "Chicken Breast", cuisine: "Thai" },
                { name: "Mapo Tofu Beef Bowl", type: "Dinner", servings: 4, protein: "Ground Beef", cuisine: "Sichuan" },
                { name: "Mongolian Beef Stir-Fry", type: "Dinner", servings: 3, protein: "Flank Steak", cuisine: "Mongolian" }
            ],
            "Week 3 Breakfasts": [
                { name: "Savory Oats with Egg", type: "Breakfast", servings: 1, protein: "Eggs", cuisine: "Asian-inspired" },
                { name: "Berry Protein Smoothie", type: "Breakfast", servings: 1, protein: "Protein Powder", cuisine: "American" },
                { name: "Peanut Butter Protein Oats", type: "Breakfast", servings: 1, protein: "Protein Powder", cuisine: "American" },
                { name: "Spicy Breakfast Wrap", type: "Breakfast", servings: 1, protein: "Eggs", cuisine: "Mexican" }
            ]
        };

        // Emoji mapping for recipe types
        const recipeEmojis = {
            'breakfast': 'üç≥',
            'lunch': 'üç±',
            'dinner': 'üçú'
        };

        // Generate recipe cards on page load
        function generateRecipeCards() {
            const directory = document.getElementById('recipe-directory');
            directory.innerHTML = '';

            Object.entries(recipesByPlan).forEach(([planName, recipes], index) => {
                const planSection = document.createElement('div');
                planSection.className = 'recipe-plan-section bg-white rounded-2xl shadow-xl p-8 border-2 border-orange-100 fade-in';
                planSection.style.animationDelay = `${index * 0.1}s`;
                planSection.dataset.plan = planName.toLowerCase();

                const planHeader = document.createElement('div');
                planHeader.className = 'mb-6 pb-4 border-b-2 border-orange-50';
                planHeader.innerHTML = `
                    <div class="flex items-center justify-between flex-wrap gap-4">
                        <div>
                            <h2 class="text-2xl sm:text-3xl font-extrabold text-slate-800 mb-2 flex items-center">
                                <span class="text-3xl mr-3">${planName.includes('Breakfast') ? 'üç≥' : 'üçΩÔ∏è'}</span>
                                ${planName}
                            </h2>
                            <p class="text-slate-600">${recipes.length} delicious recipes in this plan</p>
                        </div>
                        <a href="meals/${getPlanFile(planName)}" class="inline-flex items-center px-5 py-2.5 bg-gradient-to-r from-orange-500 to-rose-500 hover:from-orange-600 hover:to-rose-600 text-white font-bold rounded-xl transition-all duration-200 shadow-md hover:shadow-lg">
                            <span>View Full Plan</span>
                            <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path>
                            </svg>
                        </a>
                    </div>
                `;

                const recipeGrid = document.createElement('div');
                recipeGrid.className = 'grid md:grid-cols-2 gap-5 mt-6';

                recipes.forEach(recipe => {
                    const recipeCard = document.createElement('div');
                    recipeCard.className = 'recipe-card bg-gradient-to-br from-orange-50 to-rose-50 p-5 rounded-xl border-2 border-orange-100 hover:border-terracotta';
                    recipeCard.dataset.recipeName = recipe.name.toLowerCase();
                    recipeCard.dataset.protein = recipe.protein.toLowerCase();
                    recipeCard.dataset.cuisine = recipe.cuisine.toLowerCase();

                    const typeEmoji = recipeEmojis[recipe.type.toLowerCase()] || 'üçΩÔ∏è';

                    recipeCard.innerHTML = `
                        <div class="flex items-start mb-3">
                            <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-gradient-to-br from-orange-400 to-rose-500 flex items-center justify-center text-xl shadow-md mr-3">
                                ${typeEmoji}
                            </div>
                            <div class="flex-1">
                                <h3 class="font-extrabold text-lg text-slate-800 leading-tight">${recipe.name}</h3>
                            </div>
                        </div>
                        <div class="space-y-2 text-sm">
                            <div class="flex items-center">
                                <span class="w-6 h-6 rounded-md bg-white/60 flex items-center justify-center mr-2">
                                    <svg class="w-4 h-4 text-terracotta" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </span>
                                <span class="font-semibold text-slate-700 w-16">Type:</span>
                                <span class="text-slate-600">${recipe.type}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-6 h-6 rounded-md bg-white/60 flex items-center justify-center mr-2">
                                    <svg class="w-4 h-4 text-terracotta" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path>
                                    </svg>
                                </span>
                                <span class="font-semibold text-slate-700 w-16">Protein:</span>
                                <span class="text-slate-600">${recipe.protein}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-6 h-6 rounded-md bg-white/60 flex items-center justify-center mr-2">
                                    <svg class="w-4 h-4 text-terracotta" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                    </svg>
                                </span>
                                <span class="font-semibold text-slate-700 w-16">Servings:</span>
                                <span class="text-slate-600">${recipe.servings}</span>
                            </div>
                            <div class="flex items-center">
                                <span class="w-6 h-6 rounded-md bg-white/60 flex items-center justify-center mr-2">
                                    <svg class="w-4 h-4 text-terracotta" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2 2 2 0 012 2v2.945M8 3.935V5.5A2.5 2.5 0 0010.5 8h.5a2 2 0 012 2 2 2 0 104 0 2 2 0 012-2h1.064M15 20.488V18a2 2 0 012-2h3.064M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                </span>
                                <span class="font-semibold text-slate-700 w-16">Cuisine:</span>
                                <span class="text-slate-600">${recipe.cuisine}</span>
                            </div>
                        </div>
                    `;

                    recipeGrid.appendChild(recipeCard);
                });

                planSection.appendChild(planHeader);
                planSection.appendChild(recipeGrid);
                directory.appendChild(planSection);
            });
        }

        // Get plan filename from plan name
        function getPlanFile(planName) {
            const plan = mealPlans.find(p => p.title === planName);
            return plan ? plan.file : '#';
        }

        // Voice search for recipes
        function startRecipeVoiceSearch() {
            if (window.startVoiceSearch) {
                const searchInput = document.getElementById('search');
                const voiceBtn = document.getElementById('voice-search-btn');

                // Add listening state
                voiceBtn.classList.add('animate-pulse', 'bg-red-500');
                voiceBtn.title = 'Listening...';

                startVoiceSearch((transcript) => {
                    // Set the search input with the transcript
                    searchInput.value = transcript;
                    filterRecipes();

                    // Show success feedback
                    if (window.showToast) {
                        showToast(`üé§ Searching for "${transcript}"`);
                    }

                    // Remove listening state
                    voiceBtn.classList.remove('animate-pulse', 'bg-red-500');
                    voiceBtn.title = 'Voice search (click and speak)';
                });

                // Handle errors by removing listening state
                setTimeout(() => {
                    voiceBtn.classList.remove('animate-pulse', 'bg-red-500');
                    voiceBtn.title = 'Voice search (click and speak)';
                }, 10000); // 10 second timeout
            } else {
                alert('Voice search is not supported in this browser. Please try Chrome or Safari.');
            }
        }

        // Filter recipes based on search
        function filterRecipes() {
            const searchTerm = document.getElementById('search').value.toLowerCase();
            const recipeCards = document.querySelectorAll('.recipe-card');
            const planSections = document.querySelectorAll('.recipe-plan-section');
            let visibleCount = 0;

            planSections.forEach(section => {
                const cards = section.querySelectorAll('.recipe-card');
                let sectionHasVisible = false;

                cards.forEach(card => {
                    const recipeName = card.dataset.recipeName;
                    const protein = card.dataset.protein;
                    const cuisine = card.dataset.cuisine;

                    const matches = recipeName.includes(searchTerm) ||
                                  protein.includes(searchTerm) ||
                                  cuisine.includes(searchTerm);

                    if (matches) {
                        card.classList.remove('hidden');
                        sectionHasVisible = true;
                        visibleCount++;
                    } else {
                        card.classList.add('hidden');
                    }
                });

                if (sectionHasVisible) {
                    section.classList.remove('hidden');
                } else {
                    section.classList.add('hidden');
                }
            });

            // Show/hide no results message
            const noResults = document.getElementById('no-results');
            if (visibleCount === 0) {
                noResults.classList.remove('hidden');
            } else {
                noResults.classList.add('hidden');
            }
        }

        // Populate autocomplete suggestions
        function populateAutocompleteSuggestions() {
            const datalist = document.getElementById('recipe-suggestions');
            const suggestions = new Set();

            // Add all recipe names, proteins, and cuisines
            Object.values(recipesByPlan).forEach(recipes => {
                recipes.forEach(recipe => {
                    suggestions.add(recipe.name);
                    if (recipe.protein) suggestions.add(recipe.protein);
                    if (recipe.cuisine) suggestions.add(recipe.cuisine);
                });
            });

            // Populate datalist
            suggestions.forEach(suggestion => {
                const option = document.createElement('option');
                option.value = suggestion;
                datalist.appendChild(option);
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            generateRecipeCards();
            populateAutocompleteSuggestions();

            // Initialize pull-to-refresh if available
            if (window.MobileUtils && window.MobileUtils.initPullToRefresh) {
                MobileUtils.initPullToRefresh(() => {
                    // Refresh recipe display
                    generateRecipeCards();
                    showToast('Recipes refreshed!');
                });
            }
        });
    </script>

<!-- Dark Mode Toggle Button - Include in all pages -->
<button
    id="dark-mode-toggle"
    onclick="toggleDarkMode()"
    class="fixed top-4 right-4 z-[100] w-12 h-12 rounded-full bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group border-2 border-transparent hover:border-orange-400 no-print"
    aria-label="Toggle dark mode"
    title="Toggle dark mode"
>
    <!-- Sun Icon (visible in dark mode) -->
    <svg
        class="w-6 h-6 text-yellow-500 dark-mode-icon-sun hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        />
    </svg>

    <!-- Moon Icon (visible in light mode) -->
    <svg
        class="w-6 h-6 text-slate-700 dark-mode-icon-moon"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        />
    </svg>
</button>

<style>
    /* Dark mode toggle icon visibility */
    [data-theme="dark"] .dark-mode-icon-moon {
        display: none;
    }

    [data-theme="dark"] .dark-mode-icon-sun {
        display: block;
    }

    [data-theme="light"] .dark-mode-icon-sun {
        display: none;
    }

    [data-theme="light"] .dark-mode-icon-moon {
        display: block;
    }

    /* Pulse animation on first load */
    @keyframes pulse-once {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    #dark-mode-toggle.first-load {
        animation: pulse-once 0.5s ease-out;
    }

    /* Rotate animation on click */
    @keyframes rotate-icon {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    #dark-mode-toggle.rotating svg {
        animation: rotate-icon 0.5s ease-out;
    }

    /* Position adjustment for mobile bottom nav */
    @media (max-width: 767px) {
        #dark-mode-toggle {
            top: auto;
            bottom: 5rem;
            right: 1rem;
        }
    }

    /* Print mode - hide toggle */
    @media print {
        #dark-mode-toggle {
            display: none !important;
        }
    }
</style>

<script>
    // Add rotating animation on click
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('dark-mode-toggle');
        if (toggle) {
            toggle.addEventListener('click', () => {
                toggle.classList.add('rotating');
                setTimeout(() => {
                    toggle.classList.remove('rotating');
                }, 500);
            });

            // Pulse animation on first load to draw attention
            if (!localStorage.getItem('dark-mode-toggle-seen')) {
                setTimeout(() => {
                    toggle.classList.add('first-load');
                    setTimeout(() => {
                        toggle.classList.remove('first-load');
                        localStorage.setItem('dark-mode-toggle-seen', 'true');
                    }, 500);
                }, 1000);
            }
        }
    });
</script>

</body>
</html>
