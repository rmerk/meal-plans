<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#8B9D83">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Meal Plans - Recipe Discovery & Planning Dashboard</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./dist/tailwind.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="meals/plans.js"></script>
    <script src="mobile-utils.js"></script>
    <link rel="stylesheet" href="./dark-mode.css">
    <link rel="stylesheet" href="./landscape.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FAF8F5;
        }

        /* Sage & Gold Sophisticated Color Palette */
        :root {
            --sage: #8B9D83;
            --sage-hover: #7A8C74;
            --sage-light: #A8B8A0;
            --sage-dark: #6D7A66;
            --gold: #B8956A;
            --gold-hover: #A38660;
            --gold-soft: #D4A574;
            --cream: #FAF8F5;
            --cream-dark: #F5F1EC;
            --charcoal: #2D3436;
            --gray-secondary: #636E72;
            --success: #7FA87F;
            --warning: #D4A574;
            --error: #C17B7B;
            --info: #8B9DC3;
            --category-breakfast: #F4E4D7;
            --category-lunch: #E8F0E8;
            --category-dinner: #E8DFE0;
            --category-dessert: #F2E8DC;
        }

        .bg-sage { background-color: var(--sage); }
        .bg-gold { background-color: var(--gold); }
        .bg-cream { background-color: var(--cream); }
        .text-sage { color: var(--sage); }
        .text-gold { color: var(--gold); }
        .text-charcoal { color: var(--charcoal); }
        .border-sage { border-color: var(--sage); }

        /* Sophisticated Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Playfair Display', serif;
            line-height: 1.3;
        }

        /* Mobile optimizations */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        button, a, input, label {
            touch-action: manipulation;
        }

        /* Safe area insets for iPhone notch */
        nav.sticky {
            padding-top: env(safe-area-inset-top);
        }

        .fixed.bottom-0 {
            padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
        }

        /* Animations for toast/notifications */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slide-up {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in { animation: fade-in 0.3s ease-out; }
        .animate-fade-out { animation: fade-out 0.3s ease-out; }
        .animate-slide-up { animation: slide-up 0.4s ease-out; }

        /* Sophisticated Hero Section */
        .hero-gradient {
            background: linear-gradient(135deg, var(--cream) 0%, var(--cream-dark) 100%);
            position: relative;
        }

        /* Sophisticated Card Design */
        .meal-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(45, 52, 54, 0.08);
        }

        .meal-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(45, 52, 54, 0.12);
        }

        .meal-card.hidden {
            display: none;
        }

        /* Sophisticated Category Buttons */
        .category-btn {
            transition: all 0.2s ease;
            position: relative;
            border: 2px solid transparent;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            font-weight: 500;
            border-radius: 6px;
            padding: 12px 24px;
        }

        .category-btn.active {
            background: var(--sage);
            color: white;
            border-color: var(--sage);
            box-shadow: 0 2px 4px rgba(139, 157, 131, 0.2);
        }

        .category-btn:not(.active) {
            background: transparent;
            color: var(--sage);
            border-color: var(--sage);
        }

        .category-btn:not(.active):hover {
            background: var(--sage-light);
            border-color: var(--sage-hover);
            transform: translateY(-2px);
        }

        /* Floating animation for hero icons */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Fade in animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        .fade-in-delay-1 { animation-delay: 0.1s; opacity: 0; }
        .fade-in-delay-2 { animation-delay: 0.2s; opacity: 0; }
        .fade-in-delay-3 { animation-delay: 0.3s; opacity: 0; }

        /* Sophisticated Tool Cards */
        .tool-card {
            transition: all 0.3s ease;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(45, 52, 54, 0.08);
            position: relative;
        }

        .tool-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 16px rgba(45, 52, 54, 0.12);
        }

        /* Sophisticated Search Bar */
        .search-bar {
            transition: all 0.3s ease;
            border: 1.5px solid #E8E4DF;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            padding: 12px 16px;
        }

        .search-bar:focus {
            box-shadow: 0 0 0 3px rgba(139, 157, 131, 0.1);
            border: 2px solid var(--sage);
            outline: none;
        }

        /* Sophisticated View Mode Buttons */
        .view-mode-btn {
            color: var(--charcoal);
            border: 2px solid transparent;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            border-radius: 6px;
            padding: 8px 16px;
        }

        .view-mode-btn.active {
            background: var(--sage);
            color: white;
            border-color: var(--sage);
        }

        .view-mode-btn:not(.active) {
            background: var(--cream);
            border-color: var(--cream-dark);
        }

        .view-mode-btn:not(.active):hover {
            background: var(--cream-dark);
            border-color: var(--sage);
        }

        .collapsible-section {
            transition: all 0.4s ease;
            max-height: 2000px;
            overflow: hidden;
        }

        .collapsible-section.hidden {
            max-height: 0;
            opacity: 0;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body class="min-h-screen antialiased" style="background-color: var(--cream);">

    <!-- Hero Section -->
    <header class="hero-gradient relative overflow-hidden">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 relative z-10">
            <div class="text-center fade-in">
                <!-- Sophisticated Icon Badge -->
                <div class="inline-block mb-6">
                    <div class="w-20 h-20 rounded-full flex items-center justify-center text-4xl bg-white shadow-card">
                        üçΩÔ∏è
                    </div>
                </div>
                <h1 class="text-5xl sm:text-6xl lg:text-7xl font-bold tracking-tight mb-6" style="color: var(--charcoal);">
                    Your Meal Planning
                    <span class="block mt-3">Dashboard</span>
                </h1>
                <p class="text-xl sm:text-2xl max-w-3xl mx-auto mb-10 font-normal leading-relaxed" style="color: var(--gray-secondary);">
                    Discover delicious recipes, organize your weekly meals, and simplify batch cooking with smart planning tools
                </p>

                <!-- Quick search bar -->
                <div class="max-w-2xl mx-auto fade-in-delay-1">
                    <div class="relative">
                        <input
                            type="text"
                            id="quick-search"
                            placeholder="Search all recipes... (e.g., chicken, curry, breakfast)"
                            class="search-bar w-full px-6 py-4 bg-white text-slate-800 placeholder-slate-500 text-lg"
                        />
                        <button onclick="handleQuickSearch()" class="absolute right-2 top-1/2 -translate-y-1/2 text-white px-6 py-2.5 font-medium transition-all duration-200" style="background: var(--sage); border-radius: 6px; font-family: 'Inter', sans-serif;">
                            Search
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="mt-12 grid grid-cols-3 gap-8 max-w-3xl mx-auto fade-in-delay-2">
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2 bg-white rounded-lg shadow-card">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--sage);">${mealPlans.length}</div>
                        </div>
                        <div class="font-medium text-sm sm:text-base" style="color: var(--charcoal); font-family: 'Inter', sans-serif;">Meal Plans</div>
                    </div>
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2 bg-white rounded-lg shadow-card">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--gold);">50+</div>
                        </div>
                        <div class="font-medium text-sm sm:text-base" style="color: var(--charcoal); font-family: 'Inter', sans-serif;">Recipes</div>
                    </div>
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2 bg-white rounded-lg shadow-card">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--sage);">5</div>
                        </div>
                        <div class="font-medium text-sm sm:text-base" style="color: var(--charcoal); font-family: 'Inter', sans-serif;">Power Tools</div>
                    </div>
                </div>
            </div>
        </div>

    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- View Mode Toggle -->
        <div class="mb-8 flex justify-center">
            <div class="inline-flex items-center gap-2 bg-white p-2 rounded-lg shadow-card">
                <button onclick="setViewMode('simple')" id="simple-view-btn" class="view-mode-btn transition-all duration-200">
                    ‚ö° Quick Start
                </button>
                <button onclick="setViewMode('detailed')" id="detailed-view-btn" class="view-mode-btn transition-all duration-200">
                    üìö Full View
                </button>
            </div>
        </div>

        <!-- Power Tools Section -->
        <div id="power-tools-section" class="mb-12 fade-in collapsible-section">
            <div class="text-center mb-10">
                <h2 class="text-3xl font-bold mb-3" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Power Up Your Meal Prep</h2>
                <p class="text-lg" style="color: var(--gray-secondary);">Smart tools to save time and stay organized</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <a href="shopping-helper.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--sage);">
                            üõí
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Smart Shopping</h3>
                    </div>
                    <p class="mb-4 leading-relaxed" style="color: var(--gray-secondary); font-size: 14px;">
                        Auto-consolidate ingredients, track prices & budget, organize by aisle for efficient shopping.
                    </p>
                    <div class="flex items-center font-medium text-sm" style="color: var(--sage); font-family: 'Inter', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2 rounded-full" style="background: var(--success); color: white;">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>


                <a href="analytics-dashboard.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--gold);">
                            üìà
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Analytics</h3>
                    </div>
                    <p class="mb-4 leading-relaxed" style="color: var(--gray-secondary); font-size: 14px;">
                        Track cooking history, analyze nutrition trends, visualize progress with interactive charts.
                    </p>
                    <div class="flex items-center font-medium text-sm" style="color: var(--gold); font-family: 'Inter', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2 rounded-full" style="background: var(--info); color: white;">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="nutrition-dashboard.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--sage-light);">
                            üìä
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Nutrition Compare</h3>
                    </div>
                    <p class="mb-4 leading-relaxed" style="color: var(--gray-secondary); font-size: 14px;">
                        Compare meal plans side-by-side, track macros, visualize weekly nutrition with charts.
                    </p>
                    <div class="flex items-center font-medium text-sm" style="color: var(--gold); font-family: 'Inter', sans-serif;">
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="recipe-scaler.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--gold-soft);">
                            ‚öñÔ∏è
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Recipe Scaler</h3>
                    </div>
                    <p class="mb-4 leading-relaxed" style="color: var(--gray-secondary); font-size: 14px;">
                        Scale any recipe to your desired serving size with smart fraction handling and instant calculations.
                    </p>
                    <div class="flex items-center font-medium text-sm" style="color: var(--sage); font-family: 'Inter', sans-serif;">
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="settings.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--sage-light);">
                            ‚öôÔ∏è
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Settings</h3>
                    </div>
                    <p class="mb-4 leading-relaxed" style="color: var(--gray-secondary); font-size: 14px;">
                        Configure notifications, quiet hours, theme preferences, and manage your data.
                    </p>
                    <div class="flex items-center font-medium text-sm" style="color: var(--sage); font-family: 'Inter', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2 rounded-full" style="background: var(--success); color: white;">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>
            </div>
        </div>

        <!-- Recipe Discovery Section -->
        <div id="recipe-discovery-section" class="p-8 mb-12 collapsible-section bg-white rounded-lg shadow-card" style="border-left: 4px solid var(--gold);">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-lg" style="background: var(--gold);">
                        üìñ
                    </div>
                </div>
                <div class="ml-6 flex-1">
                    <h3 class="text-2xl font-bold mb-2" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Explore Our Recipe Collection</h3>
                    <p class="mb-5 leading-relaxed" style="color: var(--gray-secondary);">
                        Browse our complete recipe library to find your next favorite meal. From Asian-inspired stir-fries to high-protein breakfasts, discover dishes that fit your lifestyle.
                    </p>
                    <a href="all-recipes.html" class="inline-flex items-center px-6 py-3 text-white font-medium transition-all duration-200 rounded-lg shadow-button" style="background: var(--sage); font-family: 'Inter', sans-serif;">
                        <span>Browse All Recipes ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Meal Plans Section Header & Category Toggle -->
        <div class="mb-12">
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold mb-3" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">Your Meal Plans</h2>
                <p class="text-lg" style="color: var(--gray-secondary);">Organized weekly plans with recipes, prep guides, and shopping lists</p>
            </div>

            <div class="flex justify-center">
                <div class="inline-flex bg-white p-2 gap-2 rounded-lg shadow-card">
                    <button onclick="showCategory('meals')" id="meals-btn" class="category-btn active flex items-center gap-2">
                        <span>üçΩÔ∏è</span>
                        <span>Meals</span>
                    </button>
                    <button onclick="showCategory('breakfast')" id="breakfast-btn" class="category-btn flex items-center gap-2">
                        <span>üç≥</span>
                        <span>Breakfasts</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Meal Plans Grid -->
        <div id="meal-plans-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Cards will be dynamically generated here -->
        </div>

        <!-- Instructions Section -->
        <div id="instructions-section" class="mt-16 bg-white p-8 collapsible-section" style="border: 3px solid var(--charcoal); box-shadow: 8px 8px 0 0 var(--butter); border-top: 12px solid var(--sage);">
            <div class="flex items-center mb-8">
                <div class="w-16 h-16 flex items-center justify-center" style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--coral);">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold ml-4" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">How to Add More Meal Plans</h3>
            </div>
            <div class="space-y-5">
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--coral); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--sage); font-family: 'Space Grotesk', sans-serif;">1</span>
                    <span class="text-slate-700 leading-relaxed">Save your meal plan HTML file in the <code class="px-2 py-1 text-sm font-mono" style="background: var(--soft-peach); color: var(--coral); border: 2px solid var(--taupe);">meals/</code> directory</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter); font-family: 'Space Grotesk', sans-serif;">2</span>
                    <span class="text-slate-700 leading-relaxed">Add a new entry to <code class="px-2 py-1 text-sm font-mono" style="background: var(--soft-peach); color: var(--sage); border: 2px solid var(--taupe);">meals/plans.js</code> with your plan details</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--butter); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--coral); font-family: 'Space Grotesk', sans-serif;">3</span>
                    <span class="text-slate-700 leading-relaxed">The card will automatically appear on this page - no need to edit index.html!</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--taupe); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--sage); font-family: 'Space Grotesk', sans-serif;">4</span>
                    <span class="text-slate-700 leading-relaxed">Commit and push to GitHub - changes will be live within minutes!</span>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center py-16 mt-24">
        <div class="max-w-6xl mx-auto px-4">
            <!-- Sophisticated Footer Decoration -->
            <div class="flex justify-center mb-6">
                <div class="w-16 h-16 flex items-center justify-center text-3xl rounded-full bg-white shadow-card">
                    üçΩÔ∏è
                </div>
            </div>
            <p class="text-lg font-semibold mb-2" style="color: var(--charcoal); font-family: 'Playfair Display', serif;">
                Built with care for your meal prep journey
            </p>
            <p class="text-base" style="color: var(--gray-secondary); font-family: 'Inter', sans-serif;">
                Stay consistent, eat well, and enjoy the process
            </p>
        </div>
    </footer>

    <script>
        // Icon SVG strings for reuse
        const icons = {
            check: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>',
            clock: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',
            trending: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>',
            fire: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path></svg>',
            star: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>',
            arrow: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>'
        };

        // Quick search handler
        function handleQuickSearch() {
            const searchTerm = document.getElementById('quick-search').value;
            if (searchTerm) {
                window.location.href = `all-recipes.html?search=${encodeURIComponent(searchTerm)}`;
            }
        }

        // Allow Enter key to trigger search
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('quick-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleQuickSearch();
                }
            });
        });

        // Load ratings
        function loadRatings() {
            return JSON.parse(localStorage.getItem('meal_plan_ratings') || '{}');
        }

        // Generate meal plan cards from plans.js data
        function generateCards() {
            const grid = document.getElementById('meal-plans-grid');
            grid.innerHTML = '';

            const ratings = loadRatings();

            mealPlans.forEach((plan, index) => {
                const card = document.createElement('a');
                card.href = `meals/${plan.file}`;
                card.className = 'meal-card bg-white overflow-hidden block group';
                card.dataset.category = plan.category;
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('fade-in');

                // Sage & Gold Sophisticated color palette mapping
                const colorMap = {
                    emerald: {
                        headerBg: '#8B9D83',  // Sage
                        accentColor: '#B8956A',  // Gold
                        shadowColor: 'rgba(139, 157, 131, 0.15)',
                        emoji: 'ü•ó'
                    },
                    amber: {
                        headerBg: '#B8956A',  // Gold
                        accentColor: '#8B9D83',  // Sage
                        shadowColor: 'rgba(184, 149, 106, 0.15)',
                        emoji: 'üç≥'
                    },
                    orange: {
                        headerBg: '#A8B8A0',  // Sage Light
                        accentColor: '#B8956A',  // Gold
                        shadowColor: 'rgba(168, 184, 160, 0.15)',
                        emoji: 'üç≤'
                    },
                    red: {
                        headerBg: '#7FA87F',  // Success Green
                        accentColor: '#D4A574',  // Gold Soft
                        shadowColor: 'rgba(127, 168, 127, 0.15)',
                        emoji: 'üå∂Ô∏è'
                    },
                    blue: {
                        headerBg: '#8B9DC3',  // Info Blue
                        accentColor: '#B8956A',  // Gold
                        shadowColor: 'rgba(139, 157, 195, 0.15)',
                        emoji: 'ü•ò'
                    },
                    purple: {
                        headerBg: '#D4A574',  // Gold Soft
                        accentColor: '#8B9D83',  // Sage
                        shadowColor: 'rgba(212, 165, 116, 0.15)',
                        emoji: 'üçú'
                    }
                };

                const colors = colorMap[plan.color] || colorMap.orange;

                // Get rating for this plan
                const planId = plan.file.replace('.html', '');
                const planRating = ratings[planId];
                let ratingBadge = '';
                if (planRating) {
                    const stars = '‚òÖ'.repeat(planRating.rating) + '‚òÜ'.repeat(5 - planRating.rating);
                    ratingBadge = `
                        <div class="absolute top-3 right-3 bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg z-20">
                            <div class="flex items-center gap-1">
                                <span class="text-yellow-500 font-bold text-sm">${stars.substring(0, planRating.rating)}</span>
                                <span class="text-slate-300 font-bold text-sm">${stars.substring(planRating.rating)}</span>
                            </div>
                        </div>
                    `;
                }

                // Choose icons based on feature keywords
                const featureIcons = plan.features.map(feature => {
                    if (feature.toLowerCase().includes('time') || feature.toLowerCase().includes('minutes') || feature.toLowerCase().includes('hours') || feature.toLowerCase().includes('prep')) {
                        return icons.clock;
                    } else if (feature.toLowerCase().includes('protein') || feature.toLowerCase().includes('calories') || feature.toLowerCase().includes('high')) {
                        return icons.fire;
                    } else if (feature.toLowerCase().includes('loss') || feature.toLowerCase().includes('weight')) {
                        return icons.trending;
                    } else {
                        return icons.check;
                    }
                });

                card.innerHTML = `
                    <div style="background: ${colors.headerBg};" class="p-6 relative overflow-hidden rounded-t-lg">
                        ${ratingBadge}
                        <div class="relative z-10">
                            <div class="flex items-center mb-3">
                                <div class="w-12 h-12 flex items-center justify-center text-2xl rounded-lg" style="background: rgba(255,255,255,0.9);">
                                    ${colors.emoji}
                                </div>
                            </div>
                            <h2 class="text-2xl font-bold text-white mb-1" style="font-family: 'Playfair Display', serif;">${plan.title}</h2>
                            <p class="text-white/90 text-sm font-medium" style="font-family: 'Inter', sans-serif;">${plan.subtitle}</p>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="space-y-3 mb-6">
                            ${plan.features.map((feature, idx) => `
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-white rounded" style="background: ${colors.accentColor};">
                                        ${featureIcons[idx]}
                                    </div>
                                    <span class="ml-3 leading-relaxed font-normal" style="color: #636E72; font-size: 14px; font-family: 'Inter', sans-serif;">${feature}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="pt-4" style="border-top: 1px solid #F5F1EC;">
                            <div class="flex items-center justify-between font-medium text-sm" style="color: ${colors.headerBg}; font-family: 'Inter', sans-serif;">
                                <span>View Full Plan ‚Üí</span>
                            </div>
                        </div>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        function showCategory(category) {
            // Get all meal cards
            const cards = document.querySelectorAll('.meal-card');

            // Hide all cards first
            cards.forEach(card => {
                if (card.dataset.category === category) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });

            // Update button states
            const mealsBtn = document.getElementById('meals-btn');
            const breakfastBtn = document.getElementById('breakfast-btn');

            if (category === 'meals') {
                mealsBtn.classList.add('active');
                mealsBtn.classList.remove('text-slate-600');
                breakfastBtn.classList.remove('active');
                breakfastBtn.classList.add('text-slate-600');
            } else {
                breakfastBtn.classList.add('active');
                breakfastBtn.classList.remove('text-slate-600');
                mealsBtn.classList.remove('active');
                mealsBtn.classList.add('text-slate-600');
            }
        }

        // View mode management
        const VIEW_MODE_KEY = 'meal_plans_view_mode';

        function setViewMode(mode) {
            // Save preference
            localStorage.setItem(VIEW_MODE_KEY, mode);

            // Update button states
            const simpleBtn = document.getElementById('simple-view-btn');
            const detailedBtn = document.getElementById('detailed-view-btn');

            if (mode === 'simple') {
                simpleBtn.classList.add('active');
                detailedBtn.classList.remove('active');

                // Hide collapsible sections
                document.getElementById('power-tools-section').classList.add('hidden');
                document.getElementById('recipe-discovery-section').classList.add('hidden');
                document.getElementById('instructions-section').classList.add('hidden');
            } else {
                detailedBtn.classList.add('active');
                simpleBtn.classList.remove('active');

                // Show collapsible sections
                document.getElementById('power-tools-section').classList.remove('hidden');
                document.getElementById('recipe-discovery-section').classList.remove('hidden');
                document.getElementById('instructions-section').classList.remove('hidden');
            }
        }

        function loadViewMode() {
            const savedMode = localStorage.getItem(VIEW_MODE_KEY) || 'simple';
            setViewMode(savedMode);
        }

        // Initialize by generating cards and showing meals on page load
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            showCategory('meals');
            loadViewMode();
        });
    </script>

<!-- Dark Mode Toggle Button - Include in all pages -->
<button
    id="dark-mode-toggle"
    onclick="toggleDarkMode()"
    class="fixed top-4 right-4 z-[100] w-12 h-12 rounded-full bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group border-2 border-transparent hover:border-orange-400 no-print"
    aria-label="Toggle dark mode"
    title="Toggle dark mode"
>
    <!-- Sun Icon (visible in dark mode) -->
    <svg
        class="w-6 h-6 text-yellow-500 dark-mode-icon-sun hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        />
    </svg>

    <!-- Moon Icon (visible in light mode) -->
    <svg
        class="w-6 h-6 text-slate-700 dark-mode-icon-moon"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        />
    </svg>
</button>

<style>
    /* Dark mode toggle icon visibility */
    [data-theme="dark"] .dark-mode-icon-moon {
        display: none;
    }

    [data-theme="dark"] .dark-mode-icon-sun {
        display: block;
    }

    [data-theme="light"] .dark-mode-icon-sun {
        display: none;
    }

    [data-theme="light"] .dark-mode-icon-moon {
        display: block;
    }

    /* Pulse animation on first load */
    @keyframes pulse-once {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    #dark-mode-toggle.first-load {
        animation: pulse-once 0.5s ease-out;
    }

    /* Rotate animation on click */
    @keyframes rotate-icon {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    #dark-mode-toggle.rotating svg {
        animation: rotate-icon 0.5s ease-out;
    }

    /* Position adjustment for mobile bottom nav */
    @media (max-width: 767px) {
        #dark-mode-toggle {
            top: auto;
            bottom: 5rem;
            right: 1rem;
        }
    }

    /* Print mode - hide toggle */
    @media print {
        #dark-mode-toggle {
            display: none !important;
        }
    }
</style>

<script>
    // Add rotating animation on click
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('dark-mode-toggle');
        if (toggle) {
            toggle.addEventListener('click', () => {
                toggle.classList.add('rotating');
                setTimeout(() => {
                    toggle.classList.remove('rotating');
                }, 500);
            });

            // Pulse animation on first load to draw attention
            if (!localStorage.getItem('dark-mode-toggle-seen')) {
                setTimeout(() => {
                    toggle.classList.add('first-load');
                    setTimeout(() => {
                        toggle.classList.remove('first-load');
                        localStorage.setItem('dark-mode-toggle-seen', 'true');
                    }, 500);
                }, 1000);
            }
        }
    });
</script>

</body>
</html>
