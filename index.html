<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#D2691E">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Meal Plans - Recipe Discovery & Planning Dashboard</title>
    <link rel="manifest" href="/manifest.json">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="meals/plans.js"></script>
    <script src="mobile-utils.js"></script>
    <link rel="stylesheet" href="/dark-mode.css">
    <link rel="stylesheet" href="/landscape.css">
    <style>
        body {
            font-family: 'DM Sans', sans-serif;
        }

        /* Mid-Century Modern Color Palette */
        :root {
            --burnt-orange: #D2691E;
            --warm-terracotta: #E67E22;
            --teal: #2C7A7B;
            --teal-light: #319795;
            --mustard: #D69E2E;
            --mustard-light: #ECC94B;
            --olive: #718096;
            --warm-brown: #744210;
            --cream: #F7FAFC;
            --beige: #FFF5E6;
            --charcoal: #2D3748;
        }

        .bg-burnt-orange { background-color: var(--burnt-orange); }
        .bg-teal { background-color: var(--teal); }
        .bg-mustard { background-color: var(--mustard); }
        .text-burnt-orange { color: var(--burnt-orange); }
        .text-teal { color: var(--teal); }
        .text-mustard { color: var(--mustard); }
        .border-burnt-orange { border-color: var(--burnt-orange); }

        /* Mid-Century Typography */
        h1, h2, h3 {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        /* Mobile optimizations */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        button, a, input, label {
            touch-action: manipulation;
        }

        /* Safe area insets for iPhone notch */
        nav.sticky {
            padding-top: env(safe-area-inset-top);
        }

        .fixed.bottom-0 {
            padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
        }

        /* Animations for toast/notifications */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slide-up {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in { animation: fade-in 0.3s ease-out; }
        .animate-fade-out { animation: fade-out 0.3s ease-out; }
        .animate-slide-up { animation: slide-up 0.4s ease-out; }

        /* Mid-Century Hero Section */
        .hero-gradient {
            background: linear-gradient(165deg, var(--burnt-orange) 0%, var(--warm-terracotta) 50%, var(--mustard) 100%);
            position: relative;
        }

        /* Starburst Pattern */
        .starburst {
            position: absolute;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, transparent 30%, var(--teal) 30%, var(--teal) 32%, transparent 32%);
            opacity: 0.15;
        }

        .starburst::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 2px;
            background: var(--teal);
            transform: translate(-50%, -50%) rotate(0deg);
            box-shadow:
                0 0 0 2px var(--teal),
                0 0 0 2px var(--teal);
        }

        /* Geometric Shapes */
        .geometric-circle {
            border-radius: 50%;
            border: 3px solid var(--teal);
            background: transparent;
        }

        .geometric-square {
            border: 3px solid var(--mustard);
            background: transparent;
            transform: rotate(45deg);
        }

        /* Mid-Century Card Design */
        .meal-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            border: 3px solid var(--charcoal);
            box-shadow: 8px 8px 0 0 rgba(44, 122, 123, 0.2);
        }

        .meal-card::after {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: scale(0);
            transition: transform 0.3s ease;
        }

        .meal-card:hover::after {
            transform: scale(1);
        }

        .meal-card:hover {
            transform: translateY(-4px);
            box-shadow: 12px 12px 0 0 rgba(44, 122, 123, 0.3);
        }

        .meal-card.hidden {
            display: none;
        }

        /* Mid-Century Category Buttons */
        .category-btn {
            transition: all 0.2s ease;
            position: relative;
            border: 2px solid transparent;
            font-family: 'Space Grotesk', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.85rem;
        }

        .category-btn.active {
            background: var(--burnt-orange);
            color: white;
            border-color: var(--warm-brown);
            box-shadow: 4px 4px 0 0 var(--teal);
        }

        .category-btn:not(.active) {
            background: var(--cream);
            color: var(--charcoal);
            border-color: var(--olive);
        }

        .category-btn:not(.active):hover {
            background: var(--beige);
            border-color: var(--burnt-orange);
            transform: translateY(-2px);
        }

        /* Floating animation for hero icons */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Fade in animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.6s ease-out forwards;
        }

        .fade-in-delay-1 { animation-delay: 0.1s; opacity: 0; }
        .fade-in-delay-2 { animation-delay: 0.2s; opacity: 0; }
        .fade-in-delay-3 { animation-delay: 0.3s; opacity: 0; }

        /* Mid-Century Tool Cards */
        .tool-card {
            transition: all 0.3s ease;
            background: white;
            border: 3px solid var(--charcoal);
            box-shadow: 6px 6px 0 0 var(--mustard);
            position: relative;
        }

        .tool-card::before {
            content: '';
            position: absolute;
            top: 12px;
            left: 12px;
            right: 12px;
            bottom: 12px;
            border: 1px dashed var(--olive);
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .tool-card:hover::before {
            opacity: 0.3;
        }

        .tool-card:hover {
            transform: translate(-2px, -2px);
            box-shadow: 8px 8px 0 0 var(--mustard);
        }

        /* Mid-Century Search Bar */
        .search-bar {
            transition: all 0.3s ease;
            border: 3px solid var(--charcoal);
            font-family: 'DM Sans', sans-serif;
        }

        .search-bar:focus {
            box-shadow: 6px 6px 0 0 var(--teal);
            border-color: var(--burnt-orange);
            outline: none;
        }

        /* Mid-Century View Mode Buttons */
        .view-mode-btn {
            color: var(--charcoal);
            border: 2px solid transparent;
            font-family: 'Space Grotesk', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-size: 0.75rem;
        }

        .view-mode-btn.active {
            background: var(--teal);
            color: white;
            border-color: var(--charcoal);
            box-shadow: 3px 3px 0 0 var(--mustard);
        }

        .view-mode-btn:not(.active) {
            background: var(--cream);
            border-color: var(--olive);
        }

        .view-mode-btn:not(.active):hover {
            background: var(--beige);
            border-color: var(--teal);
        }

        .collapsible-section {
            transition: all 0.4s ease;
            max-height: 2000px;
            overflow: hidden;
        }

        .collapsible-section.hidden {
            max-height: 0;
            opacity: 0;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body class="min-h-screen antialiased" style="background: linear-gradient(135deg, var(--cream) 0%, var(--beige) 50%, #FFF8DC 100%);">

    <!-- Hero Section -->
    <header class="hero-gradient relative overflow-hidden">
        <!-- Mid-Century Geometric Decorations -->
        <div class="absolute inset-0 opacity-20">
            <!-- Starburst elements -->
            <div class="starburst" style="top: 10%; left: 5%; animation: float 6s ease-in-out infinite;"></div>
            <div class="starburst" style="top: 60%; right: 10%; animation: float 8s ease-in-out infinite; animation-delay: 1s;"></div>

            <!-- Geometric circles -->
            <div class="geometric-circle absolute" style="top: 20%; right: 15%; width: 120px; height: 120px; animation: float 7s ease-in-out infinite; animation-delay: 0.5s;"></div>
            <div class="geometric-circle absolute" style="bottom: 15%; left: 20%; width: 80px; height: 80px; animation: float 9s ease-in-out infinite; animation-delay: 2s;"></div>

            <!-- Geometric squares -->
            <div class="geometric-square absolute" style="top: 40%; left: 10%; width: 60px; height: 60px; animation: float 5s ease-in-out infinite; animation-delay: 1.5s;"></div>
            <div class="geometric-square absolute" style="bottom: 30%; right: 25%; width: 90px; height: 90px; animation: float 10s ease-in-out infinite; animation-delay: 0.8s;"></div>
        </div>

        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 relative z-10">
            <div class="text-center fade-in">
                <!-- Mid-Century Icon Badge -->
                <div class="inline-block mb-6">
                    <div class="relative">
                        <div class="w-24 h-24 rounded-full flex items-center justify-center text-5xl" style="background: var(--teal); border: 4px solid var(--charcoal); box-shadow: 8px 8px 0 0 rgba(255, 255, 255, 0.3);">
                            üçΩÔ∏è
                        </div>
                        <div class="absolute -top-2 -right-2 w-8 h-8 rounded-full" style="background: var(--mustard); border: 3px solid var(--charcoal);"></div>
                    </div>
                </div>
                <h1 class="text-5xl sm:text-6xl lg:text-7xl font-bold text-white tracking-tight mb-6 drop-shadow-lg" style="text-shadow: 3px 3px 0 rgba(0,0,0,0.2);">
                    Your Meal Planning
                    <span class="block mt-3">Dashboard</span>
                </h1>
                <p class="text-xl sm:text-2xl text-white/95 max-w-3xl mx-auto mb-10 font-normal leading-relaxed">
                    Discover delicious recipes, organize your weekly meals, and simplify batch cooking with smart planning tools
                </p>

                <!-- Quick search bar -->
                <div class="max-w-2xl mx-auto fade-in-delay-1">
                    <div class="relative">
                        <input
                            type="text"
                            id="quick-search"
                            placeholder="Search all recipes... (e.g., chicken, curry, breakfast)"
                            class="search-bar w-full px-6 py-4 rounded-none bg-white text-slate-800 placeholder-slate-500 text-lg"
                            style="box-shadow: 6px 6px 0 0 rgba(44, 122, 123, 0.3);"
                        />
                        <button onclick="handleQuickSearch()" class="absolute right-2 top-1/2 -translate-y-1/2 text-white px-6 py-2.5 font-bold transition-all duration-200 uppercase tracking-wider text-sm" style="background: var(--burnt-orange); border: 2px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--mustard); font-family: 'Space Grotesk', sans-serif;">
                            Search
                        </button>
                    </div>
                </div>

                <!-- Stats -->
                <div class="mt-12 grid grid-cols-3 gap-8 max-w-3xl mx-auto fade-in-delay-2">
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2" style="background: white; border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--teal);">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--burnt-orange);">${mealPlans.length}</div>
                        </div>
                        <div class="text-white font-semibold text-sm sm:text-base uppercase tracking-wide" style="font-family: 'Space Grotesk', sans-serif;">Meal Plans</div>
                    </div>
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2" style="background: white; border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--mustard);">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--teal);">50+</div>
                        </div>
                        <div class="text-white font-semibold text-sm sm:text-base uppercase tracking-wide" style="font-family: 'Space Grotesk', sans-serif;">Recipes</div>
                    </div>
                    <div class="text-center">
                        <div class="inline-block px-6 py-3 mb-2" style="background: white; border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--burnt-orange);">
                            <div class="text-3xl sm:text-4xl font-bold mb-1" style="color: var(--mustard);">5</div>
                        </div>
                        <div class="text-white font-semibold text-sm sm:text-base uppercase tracking-wide" style="font-family: 'Space Grotesk', sans-serif;">Power Tools</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Geometric separator -->
        <div class="absolute bottom-0 left-0 right-0 h-8" style="background: repeating-linear-gradient(90deg, var(--cream) 0px, var(--cream) 40px, var(--teal) 40px, var(--teal) 43px, var(--cream) 43px, var(--cream) 83px, var(--mustard) 83px, var(--mustard) 86px);"></div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- View Mode Toggle -->
        <div class="mb-8 flex justify-center">
            <div class="inline-flex items-center gap-4 bg-white p-2" style="border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--olive);">
                <button onclick="setViewMode('simple')" id="simple-view-btn" class="view-mode-btn px-8 py-3 font-bold transition-all duration-200">
                    ‚ö° Quick Start
                </button>
                <button onclick="setViewMode('detailed')" id="detailed-view-btn" class="view-mode-btn px-8 py-3 font-bold transition-all duration-200">
                    üìö Full View
                </button>
            </div>
        </div>

        <!-- Power Tools Section -->
        <div id="power-tools-section" class="mb-12 fade-in collapsible-section">
            <div class="text-center mb-10">
                <div class="inline-block px-8 py-3 mb-4" style="background: var(--teal); border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--mustard);">
                    <h2 class="text-3xl font-bold text-white">Power Up Your Meal Prep</h2>
                </div>
                <p class="text-slate-700 text-lg font-medium">Smart tools to save time and stay organized</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <a href="shopping-helper.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--burnt-orange); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--mustard);">
                            üõí
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Smart Shopping</h3>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">
                        Auto-consolidate ingredients, track prices & budget, organize by aisle for efficient shopping.
                    </p>
                    <div class="flex items-center font-bold text-sm uppercase tracking-wide" style="color: var(--burnt-orange); font-family: 'Space Grotesk', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2" style="background: var(--teal); color: white; border: 2px solid var(--charcoal);">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>


                <a href="analytics-dashboard.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--teal); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--burnt-orange);">
                            üìà
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Analytics</h3>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">
                        Track cooking history, analyze nutrition trends, visualize progress with interactive charts.
                    </p>
                    <div class="flex items-center font-bold text-sm uppercase tracking-wide" style="color: var(--teal); font-family: 'Space Grotesk', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2" style="background: var(--mustard); color: white; border: 2px solid var(--charcoal);">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="nutrition-dashboard.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--mustard); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--teal);">
                            üìä
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Nutrition Compare</h3>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">
                        Compare meal plans side-by-side, track macros, visualize weekly nutrition with charts.
                    </p>
                    <div class="flex items-center font-bold text-sm uppercase tracking-wide" style="color: var(--mustard); font-family: 'Space Grotesk', sans-serif;">
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="recipe-scaler.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--warm-terracotta); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--teal);">
                            ‚öñÔ∏è
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Recipe Scaler</h3>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">
                        Scale any recipe to your desired serving size with smart fraction handling and instant calculations.
                    </p>
                    <div class="flex items-center font-bold text-sm uppercase tracking-wide" style="color: var(--warm-terracotta); font-family: 'Space Grotesk', sans-serif;">
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>

                <a href="settings.html" class="tool-card p-6 block group">
                    <div class="flex items-center mb-4">
                        <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--olive); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--burnt-orange);">
                            ‚öôÔ∏è
                        </div>
                        <h3 class="ml-4 text-xl font-bold transition-colors" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Settings</h3>
                    </div>
                    <p class="text-slate-700 mb-4 leading-relaxed">
                        Configure notifications, quiet hours, theme preferences, and manage your data.
                    </p>
                    <div class="flex items-center font-bold text-sm uppercase tracking-wide" style="color: var(--olive); font-family: 'Space Grotesk', sans-serif;">
                        <span class="px-2 py-1 text-xs mr-2" style="background: var(--burnt-orange); color: white; border: 2px solid var(--charcoal);">NEW</span>
                        <span>Explore tool ‚Üí</span>
                    </div>
                </a>
            </div>
        </div>

        <!-- Recipe Discovery Section -->
        <div id="recipe-discovery-section" class="p-8 mb-12 collapsible-section" style="background: white; border: 3px solid var(--charcoal); box-shadow: 8px 8px 0 0 var(--teal); border-left: 12px solid var(--burnt-orange);">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--burnt-orange); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--mustard);">
                        üìñ
                    </div>
                </div>
                <div class="ml-6 flex-1">
                    <h3 class="text-2xl font-bold mb-2" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Explore Our Recipe Collection</h3>
                    <p class="text-slate-700 mb-5 leading-relaxed">
                        Browse our complete recipe library to find your next favorite meal. From Asian-inspired stir-fries to high-protein breakfasts, discover dishes that fit your lifestyle.
                    </p>
                    <a href="all-recipes.html" class="inline-flex items-center px-6 py-3 text-white font-bold transition-all duration-200 uppercase tracking-wide text-sm" style="background: var(--teal); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--mustard); font-family: 'Space Grotesk', sans-serif;">
                        <span>Browse All Recipes ‚Üí</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- Meal Plans Section Header & Category Toggle -->
        <div class="mb-12">
            <div class="text-center mb-8">
                <div class="inline-block px-8 py-3 mb-3" style="background: var(--burnt-orange); border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--teal);">
                    <h2 class="text-3xl font-bold text-white">Your Meal Plans</h2>
                </div>
                <p class="text-slate-700 text-lg font-medium">Organized weekly plans with recipes, prep guides, and shopping lists</p>
            </div>

            <div class="flex justify-center">
                <div class="inline-flex bg-white p-2 gap-3" style="border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--mustard);">
                    <button onclick="showCategory('meals')" id="meals-btn" class="category-btn active px-10 py-3 font-bold flex items-center gap-2">
                        <span>üçΩÔ∏è</span>
                        <span>Meals</span>
                    </button>
                    <button onclick="showCategory('breakfast')" id="breakfast-btn" class="category-btn px-10 py-3 font-bold flex items-center gap-2">
                        <span>üç≥</span>
                        <span>Breakfasts</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Meal Plans Grid -->
        <div id="meal-plans-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Cards will be dynamically generated here -->
        </div>

        <!-- Instructions Section -->
        <div id="instructions-section" class="mt-16 bg-white p-8 collapsible-section" style="border: 3px solid var(--charcoal); box-shadow: 8px 8px 0 0 var(--mustard); border-top: 12px solid var(--teal);">
            <div class="flex items-center mb-8">
                <div class="w-16 h-16 flex items-center justify-center" style="background: var(--teal); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--burnt-orange);">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
                <h3 class="text-2xl font-bold ml-4" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">How to Add More Meal Plans</h3>
            </div>
            <div class="space-y-5">
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--burnt-orange); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--teal); font-family: 'Space Grotesk', sans-serif;">1</span>
                    <span class="text-slate-700 leading-relaxed">Save your meal plan HTML file in the <code class="px-2 py-1 text-sm font-mono" style="background: var(--beige); color: var(--burnt-orange); border: 2px solid var(--olive);">meals/</code> directory</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--teal); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--mustard); font-family: 'Space Grotesk', sans-serif;">2</span>
                    <span class="text-slate-700 leading-relaxed">Add a new entry to <code class="px-2 py-1 text-sm font-mono" style="background: var(--beige); color: var(--teal); border: 2px solid var(--olive);">meals/plans.js</code> with your plan details</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--mustard); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--burnt-orange); font-family: 'Space Grotesk', sans-serif;">3</span>
                    <span class="text-slate-700 leading-relaxed">The card will automatically appear on this page - no need to edit index.html!</span>
                </div>
                <div class="flex items-start group">
                    <span class="text-white w-10 h-10 flex items-center justify-center text-lg font-bold mr-4 mt-0.5 flex-shrink-0" style="background: var(--olive); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--teal); font-family: 'Space Grotesk', sans-serif;">4</span>
                    <span class="text-slate-700 leading-relaxed">Commit and push to GitHub - changes will be live within minutes!</span>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center py-16 mt-24">
        <div class="max-w-6xl mx-auto px-4">
            <!-- Mid-Century Footer Decoration -->
            <div class="flex justify-center mb-6">
                <div class="w-20 h-20 flex items-center justify-center text-4xl" style="background: var(--teal); border: 3px solid var(--charcoal); border-radius: 50%; box-shadow: 6px 6px 0 0 var(--mustard);">
                    üçΩÔ∏è
                </div>
            </div>
            <p class="text-slate-700 text-lg font-semibold mb-2" style="font-family: 'Space Grotesk', sans-serif;">
                Built with care for your meal prep journey
            </p>
            <p class="text-slate-500 text-base">
                Stay consistent, eat well, and enjoy the process
            </p>
            <!-- Geometric decoration -->
            <div class="mt-8 flex justify-center gap-4">
                <div class="w-3 h-3" style="background: var(--burnt-orange); border: 2px solid var(--charcoal);"></div>
                <div class="w-3 h-3 rounded-full" style="background: var(--teal); border: 2px solid var(--charcoal);"></div>
                <div class="w-3 h-3" style="background: var(--mustard); border: 2px solid var(--charcoal); transform: rotate(45deg);"></div>
            </div>
        </div>
    </footer>

    <script>
        // Icon SVG strings for reuse
        const icons = {
            check: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg>',
            clock: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>',
            trending: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"></path></svg>',
            fire: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z"></path></svg>',
            star: '<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path></svg>',
            arrow: '<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg>'
        };

        // Quick search handler
        function handleQuickSearch() {
            const searchTerm = document.getElementById('quick-search').value;
            if (searchTerm) {
                window.location.href = `all-recipes.html?search=${encodeURIComponent(searchTerm)}`;
            }
        }

        // Allow Enter key to trigger search
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('quick-search').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    handleQuickSearch();
                }
            });
        });

        // Load ratings
        function loadRatings() {
            return JSON.parse(localStorage.getItem('meal_plan_ratings') || '{}');
        }

        // Generate meal plan cards from plans.js data
        function generateCards() {
            const grid = document.getElementById('meal-plans-grid');
            grid.innerHTML = '';

            const ratings = loadRatings();

            mealPlans.forEach((plan, index) => {
                const card = document.createElement('a');
                card.href = `meals/${plan.file}`;
                card.className = 'meal-card bg-white overflow-hidden block group';
                card.dataset.category = plan.category;
                card.style.animationDelay = `${index * 0.1}s`;
                card.classList.add('fade-in');

                // Mid-Century Modern color palette mapping
                const colorMap = {
                    emerald: {
                        headerBg: '#D2691E',
                        accentColor: '#2C7A7B',
                        shadowColor: 'rgba(44, 122, 123, 0.2)',
                        emoji: 'ü•ó'
                    },
                    amber: {
                        headerBg: '#D69E2E',
                        accentColor: '#D2691E',
                        shadowColor: 'rgba(210, 105, 30, 0.2)',
                        emoji: 'üç≥'
                    },
                    orange: {
                        headerBg: '#E67E22',
                        accentColor: '#2C7A7B',
                        shadowColor: 'rgba(44, 122, 123, 0.2)',
                        emoji: 'üç≤'
                    },
                    red: {
                        headerBg: '#D2691E',
                        accentColor: '#D69E2E',
                        shadowColor: 'rgba(214, 158, 46, 0.2)',
                        emoji: 'üå∂Ô∏è'
                    },
                    blue: {
                        headerBg: '#2C7A7B',
                        accentColor: '#D2691E',
                        shadowColor: 'rgba(210, 105, 30, 0.2)',
                        emoji: 'ü•ò'
                    },
                    purple: {
                        headerBg: '#718096',
                        accentColor: '#D69E2E',
                        shadowColor: 'rgba(214, 158, 46, 0.2)',
                        emoji: 'üçú'
                    }
                };

                const colors = colorMap[plan.color] || colorMap.orange;

                // Get rating for this plan
                const planId = plan.file.replace('.html', '');
                const planRating = ratings[planId];
                let ratingBadge = '';
                if (planRating) {
                    const stars = '‚òÖ'.repeat(planRating.rating) + '‚òÜ'.repeat(5 - planRating.rating);
                    ratingBadge = `
                        <div class="absolute top-3 right-3 bg-white/95 backdrop-blur-sm px-3 py-1.5 rounded-full shadow-lg z-20">
                            <div class="flex items-center gap-1">
                                <span class="text-yellow-500 font-bold text-sm">${stars.substring(0, planRating.rating)}</span>
                                <span class="text-slate-300 font-bold text-sm">${stars.substring(planRating.rating)}</span>
                            </div>
                        </div>
                    `;
                }

                // Choose icons based on feature keywords
                const featureIcons = plan.features.map(feature => {
                    if (feature.toLowerCase().includes('time') || feature.toLowerCase().includes('minutes') || feature.toLowerCase().includes('hours') || feature.toLowerCase().includes('prep')) {
                        return icons.clock;
                    } else if (feature.toLowerCase().includes('protein') || feature.toLowerCase().includes('calories') || feature.toLowerCase().includes('high')) {
                        return icons.fire;
                    } else if (feature.toLowerCase().includes('loss') || feature.toLowerCase().includes('weight')) {
                        return icons.trending;
                    } else {
                        return icons.check;
                    }
                });

                card.innerHTML = `
                    <div style="background: ${colors.headerBg}; border-bottom: 3px solid #2D3748;" class="p-6 relative overflow-hidden">
                        ${ratingBadge}
                        <div class="absolute top-2 right-2 w-16 h-16 rounded-full opacity-20" style="border: 3px solid white;"></div>
                        <div class="absolute bottom-2 left-2 w-12 h-12 opacity-20" style="background: white; transform: rotate(45deg);"></div>
                        <div class="relative z-10">
                            <div class="flex items-center mb-3">
                                <div class="w-12 h-12 flex items-center justify-center text-2xl" style="background: white; border: 2px solid #2D3748; box-shadow: 3px 3px 0 0 ${colors.accentColor};">
                                    ${colors.emoji}
                                </div>
                            </div>
                            <h2 class="text-2xl font-bold text-white mb-1" style="font-family: 'Space Grotesk', sans-serif; text-shadow: 2px 2px 0 rgba(0,0,0,0.2);">${plan.title}</h2>
                            <p class="text-white/90 text-sm font-medium">${plan.subtitle}</p>
                        </div>
                    </div>
                    <div class="p-6">
                        <div class="space-y-3 mb-6">
                            ${plan.features.map((feature, idx) => `
                                <div class="flex items-start">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-white" style="background: ${colors.accentColor}; border: 2px solid #2D3748;">
                                        ${featureIcons[idx]}
                                    </div>
                                    <span class="ml-3 text-slate-700 leading-relaxed font-medium">${feature}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="pt-4" style="border-top: 2px solid ${colors.accentColor};">
                            <div class="flex items-center justify-between font-bold uppercase tracking-wide text-sm" style="color: ${colors.headerBg}; font-family: 'Space Grotesk', sans-serif;">
                                <span>View Full Plan ‚Üí</span>
                            </div>
                        </div>
                    </div>
                `;

                grid.appendChild(card);
            });
        }

        function showCategory(category) {
            // Get all meal cards
            const cards = document.querySelectorAll('.meal-card');

            // Hide all cards first
            cards.forEach(card => {
                if (card.dataset.category === category) {
                    card.classList.remove('hidden');
                } else {
                    card.classList.add('hidden');
                }
            });

            // Update button states
            const mealsBtn = document.getElementById('meals-btn');
            const breakfastBtn = document.getElementById('breakfast-btn');

            if (category === 'meals') {
                mealsBtn.classList.add('active');
                mealsBtn.classList.remove('text-slate-600');
                breakfastBtn.classList.remove('active');
                breakfastBtn.classList.add('text-slate-600');
            } else {
                breakfastBtn.classList.add('active');
                breakfastBtn.classList.remove('text-slate-600');
                mealsBtn.classList.remove('active');
                mealsBtn.classList.add('text-slate-600');
            }
        }

        // View mode management
        const VIEW_MODE_KEY = 'meal_plans_view_mode';

        function setViewMode(mode) {
            // Save preference
            localStorage.setItem(VIEW_MODE_KEY, mode);

            // Update button states
            const simpleBtn = document.getElementById('simple-view-btn');
            const detailedBtn = document.getElementById('detailed-view-btn');

            if (mode === 'simple') {
                simpleBtn.classList.add('active');
                detailedBtn.classList.remove('active');

                // Hide collapsible sections
                document.getElementById('power-tools-section').classList.add('hidden');
                document.getElementById('recipe-discovery-section').classList.add('hidden');
                document.getElementById('instructions-section').classList.add('hidden');
            } else {
                detailedBtn.classList.add('active');
                simpleBtn.classList.remove('active');

                // Show collapsible sections
                document.getElementById('power-tools-section').classList.remove('hidden');
                document.getElementById('recipe-discovery-section').classList.remove('hidden');
                document.getElementById('instructions-section').classList.remove('hidden');
            }
        }

        function loadViewMode() {
            const savedMode = localStorage.getItem(VIEW_MODE_KEY) || 'simple';
            setViewMode(savedMode);
        }

        // Initialize by generating cards and showing meals on page load
        document.addEventListener('DOMContentLoaded', function() {
            generateCards();
            showCategory('meals');
            loadViewMode();
        });
    </script>

<!-- Dark Mode Toggle Button - Include in all pages -->
<button
    id="dark-mode-toggle"
    onclick="toggleDarkMode()"
    class="fixed top-4 right-4 z-[100] w-12 h-12 rounded-full bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group border-2 border-transparent hover:border-orange-400 no-print"
    aria-label="Toggle dark mode"
    title="Toggle dark mode"
>
    <!-- Sun Icon (visible in dark mode) -->
    <svg
        class="w-6 h-6 text-yellow-500 dark-mode-icon-sun hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        />
    </svg>

    <!-- Moon Icon (visible in light mode) -->
    <svg
        class="w-6 h-6 text-slate-700 dark-mode-icon-moon"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        />
    </svg>
</button>

<style>
    /* Dark mode toggle icon visibility */
    [data-theme="dark"] .dark-mode-icon-moon {
        display: none;
    }

    [data-theme="dark"] .dark-mode-icon-sun {
        display: block;
    }

    [data-theme="light"] .dark-mode-icon-sun {
        display: none;
    }

    [data-theme="light"] .dark-mode-icon-moon {
        display: block;
    }

    /* Pulse animation on first load */
    @keyframes pulse-once {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    #dark-mode-toggle.first-load {
        animation: pulse-once 0.5s ease-out;
    }

    /* Rotate animation on click */
    @keyframes rotate-icon {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    #dark-mode-toggle.rotating svg {
        animation: rotate-icon 0.5s ease-out;
    }

    /* Position adjustment for mobile bottom nav */
    @media (max-width: 767px) {
        #dark-mode-toggle {
            top: auto;
            bottom: 5rem;
            right: 1rem;
        }
    }

    /* Print mode - hide toggle */
    @media print {
        #dark-mode-toggle {
            display: none !important;
        }
    }
</style>

<script>
    // Add rotating animation on click
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('dark-mode-toggle');
        if (toggle) {
            toggle.addEventListener('click', () => {
                toggle.classList.add('rotating');
                setTimeout(() => {
                    toggle.classList.remove('rotating');
                }, 500);
            });

            // Pulse animation on first load to draw attention
            if (!localStorage.getItem('dark-mode-toggle-seen')) {
                setTimeout(() => {
                    toggle.classList.add('first-load');
                    setTimeout(() => {
                        toggle.classList.remove('first-load');
                        localStorage.setItem('dark-mode-toggle-seen', 'true');
                    }, 500);
                }, 1000);
            }
        }
    });
</script>

</body>
</html>
