<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <meta name="theme-color" content="#F06C6C">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Recipe Scaler - Meal Plans</title>
    <link rel="manifest" href="./manifest.json">
    <link rel="stylesheet" href="./dist/tailwind.css">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="mobile-utils.js"></script>
    <link rel="stylesheet" href="./dark-mode.css">
    <link rel="stylesheet" href="./landscape.css">
    <style>
        body {
            font-family: 'DM Sans', sans-serif;
        }

        /* Atomic Age Sunset Color Palette */
        :root {
            --coral: #F06C6C;
            --coral-dark: #D95555;
            --sage: #87AB8F;
            --sage-light: #A4C4A7;
            --butter: #F4D35E;
            --butter-light: #FFE66D;
            --taupe: #C9B5A0;
            --warm-brown: #8B6F47;
            --warm-cream: #FFF8F0;
            --soft-peach: #FFE5D9;
            --charcoal: #2D3748;
        }

        .bg-coral { background-color: var(--coral); }
        .bg-sage { background-color: var(--sage); }
        .bg-butter { background-color: var(--butter); }
        .text-coral { color: var(--coral); }
        .text-sage { color: var(--sage); }
        .text-butter { color: var(--butter); }
        .border-coral { border-color: var(--coral); }

        /* Mid-Century Typography */
        h1, h2, h3 {
            font-family: 'Space Grotesk', sans-serif;
            letter-spacing: -0.02em;
        }

        /* Atomic Age Hero Section */
        .hero-gradient {
            background: linear-gradient(165deg, var(--coral) 0%, #FF8787 50%, var(--butter) 100%);
            position: relative;
        }

        /* Mobile optimizations */
        * {
            -webkit-tap-highlight-color: transparent;
        }

        button, a, input, label {
            touch-action: manipulation;
        }

        /* Safe area insets for iPhone notch */
        nav.sticky {
            padding-top: env(safe-area-inset-top);
        }

        .fixed.bottom-0 {
            padding-bottom: calc(0.75rem + env(safe-area-inset-bottom));
        }

        /* Animations for toast/notifications */
        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fade-out {
            from { opacity: 1; }
            to { opacity: 0; }
        }

        @keyframes slide-up {
            from { opacity: 0; transform: translateY(100px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in { animation: fade-in 0.3s ease-out; }
        .animate-fade-out { animation: fade-out 0.3s ease-out; }
        .animate-slide-up { animation: slide-up 0.4s ease-out; }

        /* Smooth animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes scaleIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out;
        }

        .scale-in {
            animation: scaleIn 0.3s ease-out;
        }

        /* Geometric Shapes */
        .geometric-circle {
            border-radius: 50%;
            border: 3px solid var(--sage);
            background: transparent;
        }

        .geometric-square {
            border: 3px solid var(--butter);
            background: transparent;
            transform: rotate(45deg);
        }

        /* Floating animation for hero icons */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .float-animation {
            animation: float 3s ease-in-out infinite;
        }

        /* Atomic Age Scale button effects */
        .scale-button {
            transition: all 0.2s ease;
            position: relative;
            border: 3px solid var(--charcoal);
            font-family: 'Space Grotesk', sans-serif;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 700;
        }

        .scale-button.active {
            background: var(--coral);
            color: white;
            box-shadow: 4px 4px 0 0 var(--sage);
            transform: translateY(-2px);
        }

        .scale-button:not(.active) {
            background: var(--warm-cream);
            color: var(--charcoal);
            box-shadow: 3px 3px 0 0 var(--taupe);
        }

        .scale-button:not(.active):hover {
            background: var(--soft-peach);
            transform: translateY(-2px);
            box-shadow: 4px 4px 0 0 var(--sage);
        }

        /* Atomic Age Input field effects */
        input:focus,
        textarea:focus {
            box-shadow: 6px 6px 0 0 var(--sage);
            border-color: var(--coral);
            outline: none;
            transition: all 0.2s ease;
        }

        /* Atomic Age Output styling */
        #scaled-output > div:hover {
            background: var(--soft-peach) !important;
            transform: translateX(4px);
            transition: all 0.2s ease;
        }

        /* Atomic Age Card hover effects */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 3px solid var(--charcoal);
            box-shadow: 6px 6px 0 0 var(--sage);
        }

        .card-hover:hover {
            transform: translate(-2px, -2px);
            box-shadow: 8px 8px 0 0 var(--sage);
        }

        /* Atomic Age Button effects */
        button {
            position: relative;
            transition: all 0.2s ease;
        }

        button:active {
            transform: translateY(0);
        }
    </style>
    <script src="meals/plans.js"></script>
</head>
<body class="min-h-screen antialiased" style="background: linear-gradient(135deg, var(--warm-cream) 0%, var(--soft-peach) 50%, #FFF4E6 100%);">

    <!-- Header -->
    <header class="hero-gradient relative overflow-hidden">
        <!-- Mid-Century Geometric Decorations -->
        <div class="absolute inset-0 opacity-20">
            <!-- Geometric circles -->
            <div class="geometric-circle absolute" style="top: 15%; right: 10%; width: 120px; height: 120px; animation: float 7s ease-in-out infinite;"></div>
            <div class="geometric-circle absolute" style="bottom: 20%; left: 15%; width: 80px; height: 80px; animation: float 9s ease-in-out infinite; animation-delay: 2s;"></div>

            <!-- Geometric squares -->
            <div class="geometric-square absolute" style="top: 40%; left: 8%; width: 60px; height: 60px; animation: float 5s ease-in-out infinite; animation-delay: 1.5s;"></div>
            <div class="geometric-square absolute" style="bottom: 35%; right: 20%; width: 90px; height: 90px; animation: float 10s ease-in-out infinite; animation-delay: 0.8s;"></div>
        </div>

        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 relative z-10">
            <div class="text-center">
                <!-- Atomic Age Icon Badge -->
                <div class="inline-block mb-6">
                    <div class="relative">
                        <div class="w-20 h-20 rounded-full flex items-center justify-center text-4xl" style="background: var(--sage); border: 4px solid var(--charcoal); box-shadow: 6px 6px 0 0 rgba(255, 255, 255, 0.3);">
                            ‚öñÔ∏è
                        </div>
                        <div class="absolute -top-2 -right-2 w-8 h-8 rounded-full" style="background: var(--butter); border: 3px solid var(--charcoal);"></div>
                    </div>
                </div>
                <h1 class="text-4xl sm:text-5xl font-bold text-white tracking-tight mb-4 drop-shadow-lg" style="text-shadow: 3px 3px 0 rgba(0,0,0,0.2);">
                    Recipe Scaler
                </h1>
                <p class="text-xl text-white/95 max-w-2xl mx-auto mb-6 font-normal leading-relaxed">
                    Scale recipes instantly ‚Ä¢ Adjust servings ‚Ä¢ Auto-calculate ingredients
                </p>
                <a href="index.html" class="inline-flex items-center px-6 py-3 text-white font-bold transition-all duration-200 uppercase tracking-wide text-sm" style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--butter); font-family: 'Space Grotesk', sans-serif;">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Dashboard
                </a>
            </div>
        </div>

        <!-- Geometric separator -->
        <div class="absolute bottom-0 left-0 right-0 h-8" style="background: repeating-linear-gradient(90deg, var(--warm-cream) 0px, var(--warm-cream) 40px, var(--sage) 40px, var(--sage) 43px, var(--warm-cream) 43px, var(--warm-cream) 83px, var(--butter) 83px, var(--butter) 86px);"></div>
    </header>

    <!-- Main Content -->
    <main class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Instructions -->
        <div class="p-6 mb-10" style="background: white; border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--sage); border-left: 12px solid var(--coral);">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <div class="w-12 h-12 flex items-center justify-center" style="background: var(--coral); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter);">
                        <svg class="h-6 w-6 text-white" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
                <div class="ml-5 flex-1">
                    <h3 class="text-lg font-bold mb-2" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">How it Works</h3>
                    <p class="text-slate-700 leading-relaxed">
                        Enter any recipe with ingredients and quantities, select your desired scale (0.5x, 1x, 1.5x, 2x, or custom), and we'll automatically recalculate all ingredient amounts for you!
                    </p>
                </div>
            </div>
        </div>

        <div class="grid lg:grid-cols-2 gap-8">

            <!-- Left Column: Input -->
            <div class="bg-white p-6 card-hover fade-in">
                <div class="mb-4 pb-3" style="border-bottom: 3px solid var(--coral);">
                    <h2 class="text-2xl font-bold flex items-center gap-2" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        <span class="inline-block w-10 h-10 flex items-center justify-center text-xl" style="background: var(--coral); border: 2px solid var(--charcoal); box-shadow: 2px 2px 0 0 var(--butter);">üìù</span>
                        Original Recipe
                    </h2>
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-bold mb-2 uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        Recipe Name
                    </label>
                    <input
                        type="text"
                        id="recipe-name"
                        placeholder="e.g., Gochugaru Beef & Broccoli Bowl"
                        class="w-full px-4 py-3 bg-white transition"
                        style="border: 3px solid var(--charcoal); font-family: 'DM Sans', sans-serif;"
                    >
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-bold mb-2 uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        Original Servings
                    </label>
                    <input
                        type="number"
                        id="original-servings"
                        value="4"
                        min="1"
                        class="w-full px-4 py-3 bg-white transition"
                        style="border: 3px solid var(--charcoal); font-family: 'DM Sans', sans-serif;"
                    >
                </div>

                <div class="mb-4">
                    <label class="block text-sm font-bold mb-2 uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        Ingredients (one per line)
                    </label>
                    <textarea
                        id="ingredients-input"
                        rows="12"
                        placeholder="1.25 lbs ground beef&#10;8 cups broccoli florets&#10;4 cups cooked brown rice&#10;6 tbsp soy sauce&#10;4-8 tsp gochugaru&#10;4 tsp honey&#10;4 tsp sesame oil&#10;8 cloves garlic&#10;4 tsp ginger"
                        class="w-full px-4 py-3 bg-white font-mono text-sm transition"
                        style="border: 3px solid var(--charcoal); font-family: 'DM Mono', monospace;"
                    ></textarea>
                    <p class="text-xs text-slate-600 mt-2 flex items-center">
                        <svg class="w-3 h-3 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                        Include quantities with units (cups, tbsp, lbs, etc.)
                    </p>
                </div>

                <button
                    onclick="loadSampleRecipe()"
                    class="w-full py-3 px-4 font-bold transition uppercase tracking-wide text-sm"
                    style="background: var(--warm-cream); color: var(--charcoal); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--taupe); font-family: 'Space Grotesk', sans-serif;"
                    onmouseover="this.style.background='var(--soft-peach)'; this.style.boxShadow='5px 5px 0 0 var(--sage)';"
                    onmouseout="this.style.background='var(--warm-cream)'; this.style.boxShadow='4px 4px 0 0 var(--taupe)';"
                >
                    Load Sample Recipe
                </button>
            </div>

            <!-- Right Column: Scaled Output -->
            <div class="bg-white p-6 card-hover fade-in">
                <div class="mb-4 pb-3" style="border-bottom: 3px solid var(--sage);">
                    <h2 class="text-2xl font-bold flex items-center gap-2" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        <span class="inline-block w-10 h-10 flex items-center justify-center text-xl" style="background: var(--sage); border: 2px solid var(--charcoal); box-shadow: 2px 2px 0 0 var(--coral);">üéØ</span>
                        Scaled Recipe
                    </h2>
                </div>

                <!-- Scaling Controls -->
                <div class="mb-6">
                    <label class="block text-sm font-bold mb-3 uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Scale Factor</label>
                    <div class="grid grid-cols-5 gap-2 mb-3">
                        <button onclick="setScale(0.5)" class="scale-button py-2">0.5x</button>
                        <button onclick="setScale(1)" class="scale-button py-2 active">1x</button>
                        <button onclick="setScale(1.5)" class="scale-button py-2">1.5x</button>
                        <button onclick="setScale(2)" class="scale-button py-2">2x</button>
                        <button onclick="setScale(3)" class="scale-button py-2">3x</button>
                    </div>
                    <div class="flex gap-2 items-center">
                        <!-- Stepper Controls -->
                        <button
                            onclick="decrementScale()"
                            class="w-12 h-12 flex items-center justify-center font-bold transition-all active:scale-95"
                            style="background: var(--warm-cream); color: var(--charcoal); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--taupe);"
                            aria-label="Decrease scale"
                            title="Decrease by 0.25x"
                            onmouseover="this.style.background='var(--soft-peach)';"
                            onmouseout="this.style.background='var(--warm-cream)';"
                        >
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M20 12H4"/>
                            </svg>
                        </button>
                        <input
                            type="number"
                            id="custom-scale"
                            step="0.25"
                            min="0.1"
                            max="10"
                            placeholder="Custom"
                            inputmode="decimal"
                            class="flex-1 px-4 py-3 text-center text-lg font-bold bg-white transition"
                            style="border: 3px solid var(--charcoal); font-family: 'Space Grotesk', sans-serif;"
                        >
                        <button
                            onclick="incrementScale()"
                            class="w-12 h-12 flex items-center justify-center text-white font-bold transition-all active:scale-95"
                            style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter);"
                            aria-label="Increase scale"
                            title="Increase by 0.25x"
                            onmouseover="this.style.background='var(--sage-light)';"
                            onmouseout="this.style.background='var(--sage)';"
                        >
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M12 4v16m8-8H4"/>
                            </svg>
                        </button>
                        <button
                            onclick="applyCustomScale()"
                            class="text-white font-bold px-6 py-3 transition uppercase tracking-wide text-sm"
                            style="background: var(--coral); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter); font-family: 'Space Grotesk', sans-serif;"
                            onmouseover="this.style.background='var(--coral-dark)';"
                            onmouseout="this.style.background='var(--coral)';"
                        >
                            Apply
                        </button>
                    </div>
                </div>

                <!-- Servings Info -->
                <div class="p-5 mb-4 scale-in" style="background: var(--soft-peach); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--sage);">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="p-3 mr-3" style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter);">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                                </svg>
                            </div>
                            <div>
                                <div class="text-xs font-bold uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">New Servings</div>
                                <div id="new-servings" class="text-3xl font-bold" style="color: var(--sage); font-family: 'Space Grotesk', sans-serif;">4</div>
                            </div>
                        </div>
                        <div class="text-right flex items-center">
                            <div class="mr-3">
                                <div class="text-xs font-bold uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Scale Factor</div>
                                <div id="current-scale" class="text-3xl font-bold" style="color: var(--coral); font-family: 'Space Grotesk', sans-serif;">1.0x</div>
                            </div>
                            <div class="p-3" style="background: var(--coral); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter);">
                                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scaled Ingredients -->
                <div class="mb-4">
                    <label class="block text-sm font-bold mb-2 uppercase tracking-wide" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">
                        Scaled Ingredients
                    </label>
                    <div id="scaled-output" class="p-4 min-h-[300px] font-mono text-sm" style="background: var(--warm-cream); border: 3px solid var(--charcoal); box-shadow: inset 2px 2px 0 0 rgba(0,0,0,0.05);">
                        <div class="text-slate-400 text-center py-12 flex flex-col items-center">
                            <svg class="w-12 h-12 mb-3 text-slate-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                            </svg>
                            <span>Enter ingredients and select a scale factor</span>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-2">
                    <button
                        onclick="copyScaledRecipe()"
                        class="flex-1 text-white font-bold py-3 px-4 transition flex items-center justify-center gap-2 uppercase tracking-wide text-sm"
                        style="background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--butter); font-family: 'Space Grotesk', sans-serif;"
                        onmouseover="this.style.background='var(--sage-light)';"
                        onmouseout="this.style.background='var(--sage)';"
                    >
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                        </svg>
                        Copy
                    </button>
                    <button
                        onclick="printRecipe()"
                        class="flex-1 text-white font-bold py-3 px-4 transition flex items-center justify-center gap-2 uppercase tracking-wide text-sm"
                        style="background: var(--butter); color: var(--charcoal); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--coral); font-family: 'Space Grotesk', sans-serif;"
                        onmouseover="this.style.background='var(--butter-light)';"
                        onmouseout="this.style.background='var(--butter)';"
                    >
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path>
                        </svg>
                        Print
                    </button>
                </div>
            </div>

        </div>

        <!-- Tips -->
        <div class="mt-8 bg-white p-6" style="border: 3px solid var(--charcoal); box-shadow: 6px 6px 0 0 var(--butter); border-top: 12px solid var(--sage);">
            <div class="flex items-center mb-4">
                <div class="w-12 h-12 flex items-center justify-center text-2xl mr-3" style="background: var(--butter); border: 3px solid var(--charcoal); box-shadow: 3px 3px 0 0 var(--coral);">
                    üí°
                </div>
                <h3 class="font-bold text-xl" style="color: var(--charcoal); font-family: 'Space Grotesk', sans-serif;">Pro Tips</h3>
            </div>
            <ul class="grid md:grid-cols-2 gap-3 text-sm text-slate-700">
                <li class="flex items-start">
                    <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center mr-3 mt-0.5" style="background: var(--sage); border: 2px solid var(--charcoal);">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </span>
                    <span>Use standard abbreviations: tsp, tbsp, cup, lb, oz, g, kg</span>
                </li>
                <li class="flex items-start">
                    <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center mr-3 mt-0.5" style="background: var(--coral); border: 2px solid var(--charcoal);">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </span>
                    <span>Fractions work too: 1/2 cup, 1/4 tsp, 3/4 lb</span>
                </li>
                <li class="flex items-start">
                    <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center mr-3 mt-0.5" style="background: var(--butter); border: 2px solid var(--charcoal);">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </span>
                    <span>Scale up for meal prep or down for smaller portions</span>
                </li>
                <li class="flex items-start">
                    <span class="flex-shrink-0 w-6 h-6 flex items-center justify-center mr-3 mt-0.5" style="background: var(--taupe); border: 2px solid var(--charcoal);">
                        <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"></path>
                        </svg>
                    </span>
                    <span>Seasonings may not need full scaling - adjust to taste</span>
                </li>
            </ul>
        </div>

    </main>

    <!-- Footer -->
    <footer class="text-center py-16 mt-24">
        <div class="max-w-6xl mx-auto px-4">
            <!-- Atomic Age Footer Decoration -->
            <div class="flex justify-center mb-6">
                <div class="w-16 h-16 flex items-center justify-center text-3xl" style="background: var(--coral); border: 3px solid var(--charcoal); border-radius: 50%; box-shadow: 6px 6px 0 0 var(--butter);">
                    ‚öñÔ∏è
                </div>
            </div>
            <p class="text-slate-700 text-lg font-semibold mb-2" style="font-family: 'Space Grotesk', sans-serif;">
                Recipe Scaler ‚Ä¢ Perfect portions every time
            </p>
            <p class="text-slate-500 text-base">
                Scale with precision, cook with confidence
            </p>
            <!-- Geometric decoration -->
            <div class="mt-8 flex justify-center gap-4">
                <div class="w-3 h-3" style="background: var(--coral); border: 2px solid var(--charcoal);"></div>
                <div class="w-3 h-3 rounded-full" style="background: var(--sage); border: 2px solid var(--charcoal);"></div>
                <div class="w-3 h-3" style="background: var(--butter); border: 2px solid var(--charcoal); transform: rotate(45deg);"></div>
            </div>
        </div>
    </footer>

    <script>
        let currentScale = 1.0;

        // Parse a number from text (handles fractions, decimals, ranges)
        function parseNumber(text) {
            // Handle fractions like "1/2"
            if (text.includes('/')) {
                const parts = text.split('/').map(p => parseFloat(p.trim()));
                if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {
                    return parts[0] / parts[1];
                }
            }

            // Handle ranges like "4-8" (take average)
            if (text.includes('-')) {
                const parts = text.split('-').map(p => parseFloat(p.trim()));
                if (parts.length === 2 && !isNaN(parts[0]) && !isNaN(parts[1])) {
                    return (parts[0] + parts[1]) / 2;
                }
            }

            return parseFloat(text);
        }

        // Format a number for display
        function formatNumber(num) {
            // Round to 2 decimal places
            num = Math.round(num * 100) / 100;

            // Convert to fraction if it's a common one
            const fractions = {
                0.125: '1/8', 0.25: '1/4', 0.333: '1/3', 0.5: '1/2',
                0.667: '2/3', 0.75: '3/4', 1.5: '1 1/2', 2.5: '2 1/2'
            };

            for (const [decimal, fraction] of Object.entries(fractions)) {
                if (Math.abs(num - parseFloat(decimal)) < 0.02) {
                    return fraction;
                }
            }

            // Otherwise return as decimal
            return num % 1 === 0 ? num.toString() : num.toFixed(2);
        }

        // Parse and scale an ingredient line
        function scaleIngredient(line, scale) {
            // Match patterns like "1.25 lbs ground beef" or "4 tsp honey"
            const pattern = /^([\d./\-]+(?:\s+[\d./\-]+)?)\s+(.+)$/;
            const match = line.trim().match(pattern);

            if (!match) {
                // No quantity found, return as-is
                return line;
            }

            const quantity = match[1];
            const rest = match[2];

            // Parse and scale the quantity
            const num = parseNumber(quantity);
            if (isNaN(num)) {
                return line;
            }

            const scaled = num * scale;
            const formatted = formatNumber(scaled);

            return `${formatted} ${rest}`;
        }

        // Increment scale (for stepper button)
        function incrementScale() {
            const input = document.getElementById('custom-scale');
            let currentValue = parseFloat(input.value) || currentScale || 1.0;
            let newValue = Math.round((currentValue + 0.25) * 100) / 100; // Round to 2 decimals

            if (newValue <= 10) {
                input.value = newValue;
                currentScale = newValue;
                scaleRecipe();
                if (window.hapticLight) hapticLight();

                // Clear active preset buttons
                document.querySelectorAll('.scale-button').forEach(btn => {
                    btn.classList.remove('active');
                });
            } else {
                if (window.showToast) showToast('Maximum scale is 10x');
                if (window.hapticError) hapticError();
            }
        }

        // Decrement scale (for stepper button)
        function decrementScale() {
            const input = document.getElementById('custom-scale');
            let currentValue = parseFloat(input.value) || currentScale || 1.0;
            let newValue = Math.round((currentValue - 0.25) * 100) / 100; // Round to 2 decimals

            if (newValue >= 0.1) {
                input.value = newValue;
                currentScale = newValue;
                scaleRecipe();
                if (window.hapticLight) hapticLight();

                // Clear active preset buttons
                document.querySelectorAll('.scale-button').forEach(btn => {
                    btn.classList.remove('active');
                });
            } else {
                if (window.showToast) showToast('Minimum scale is 0.1x');
                if (window.hapticError) hapticError();
            }
        }

        // Set scale factor
        function setScale(scale) {
            currentScale = scale;
            document.getElementById('custom-scale').value = '';

            // Update active button
            document.querySelectorAll('.scale-button').forEach(btn => {
                btn.classList.remove('active');
            });

            const activeBtn = event.target;
            activeBtn.classList.add('active');

            scaleRecipe();
        }

        // Apply custom scale
        function applyCustomScale() {
            const customScale = parseFloat(document.getElementById('custom-scale').value);
            if (!isNaN(customScale) && customScale > 0) {
                currentScale = customScale;

                // Clear active buttons
                document.querySelectorAll('.scale-button').forEach(btn => {
                    btn.classList.remove('active');
                });

                scaleRecipe();
            }
        }

        // Scale the recipe
        function scaleRecipe() {
            const ingredients = document.getElementById('ingredients-input').value;
            if (!ingredients.trim()) {
                return;
            }

            const lines = ingredients.split('\n');
            const scaled = lines.map(line => scaleIngredient(line, currentScale));

            // Update output
            const output = document.getElementById('scaled-output');
            output.innerHTML = scaled.map(line =>
                `<div class="py-1 hover:bg-slate-100 px-2 rounded">${line}</div>`
            ).join('');

            // Update servings
            const originalServings = parseInt(document.getElementById('original-servings').value) || 4;
            const newServings = Math.round(originalServings * currentScale);
            document.getElementById('new-servings').textContent = newServings;
            document.getElementById('current-scale').textContent = currentScale.toFixed(1) + 'x';
        }

        // Load sample recipe
        function loadSampleRecipe() {
            document.getElementById('recipe-name').value = 'Gochugaru Beef & Broccoli Bowl';
            document.getElementById('original-servings').value = '4';
            document.getElementById('ingredients-input').value = `1.25 lbs ground beef
8 cups broccoli florets
4 cups cooked brown rice
6 tbsp soy sauce
4-8 tsp gochugaru
4 tsp honey
4 tsp sesame oil
8 cloves garlic
4 tsp ginger`;
            scaleRecipe();
        }

        // Copy scaled recipe
        function copyScaledRecipe() {
            const recipeName = document.getElementById('recipe-name').value || 'Recipe';
            const newServings = document.getElementById('new-servings').textContent;
            const output = document.getElementById('scaled-output');

            const lines = Array.from(output.querySelectorAll('div')).map(div => div.textContent);

            const text = `${recipeName} (${newServings} servings)\n\nIngredients:\n${lines.join('\n')}`;

            navigator.clipboard.writeText(text).then(() => {
                showNotification('Recipe copied to clipboard!');
            }).catch(err => {
                console.error('Failed to copy:', err);
                alert('Failed to copy to clipboard');
            });
        }

        // Print recipe
        function printRecipe() {
            const recipeName = document.getElementById('recipe-name').value || 'Recipe';
            const newServings = document.getElementById('new-servings').textContent;
            const output = document.getElementById('scaled-output');

            const lines = Array.from(output.querySelectorAll('div')).map(div => div.textContent);

            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>${recipeName}</title>
                    <style>
                        body { font-family: Arial, sans-serif; padding: 20px; }
                        h1 { color: #333; }
                        ul { list-style: none; padding: 0; }
                        li { padding: 5px 0; border-bottom: 1px solid #eee; }
                    </style>
                </head>
                <body>
                    <h1>${recipeName}</h1>
                    <p><strong>Servings:</strong> ${newServings}</p>
                    <h2>Ingredients</h2>
                    <ul>
                        ${lines.map(line => `<li>${line}</li>`).join('')}
                    </ul>
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // Show notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 text-white px-6 py-3 z-50 font-bold';
            notification.style.cssText = 'background: var(--sage); border: 3px solid var(--charcoal); box-shadow: 4px 4px 0 0 var(--butter); font-family: "Space Grotesk", sans-serif;';
            notification.innerHTML = `
                <div class="flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span>${message}</span>
                </div>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transition = 'opacity 0.3s';
                setTimeout(() => notification.remove(), 300);
            }, 2000);
        }

        // Auto-scale on input change
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('ingredients-input').addEventListener('input', scaleRecipe);
            document.getElementById('original-servings').addEventListener('input', scaleRecipe);
        });
    </script>

<!-- Dark Mode Toggle Button - Include in all pages -->
<button
    id="dark-mode-toggle"
    onclick="toggleDarkMode()"
    class="fixed top-4 right-4 z-[100] w-12 h-12 rounded-full bg-white/90 dark:bg-slate-800/90 backdrop-blur-sm shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group border-2 border-transparent hover:border-orange-400 no-print"
    aria-label="Toggle dark mode"
    title="Toggle dark mode"
>
    <!-- Sun Icon (visible in dark mode) -->
    <svg
        class="w-6 h-6 text-yellow-500 dark-mode-icon-sun hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
        />
    </svg>

    <!-- Moon Icon (visible in light mode) -->
    <svg
        class="w-6 h-6 text-slate-700 dark-mode-icon-moon"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
    >
        <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
        />
    </svg>
</button>

<style>
    /* Dark mode toggle icon visibility */
    [data-theme="dark"] .dark-mode-icon-moon {
        display: none;
    }

    [data-theme="dark"] .dark-mode-icon-sun {
        display: block;
    }

    [data-theme="light"] .dark-mode-icon-sun {
        display: none;
    }

    [data-theme="light"] .dark-mode-icon-moon {
        display: block;
    }

    /* Pulse animation on first load */
    @keyframes pulse-once {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    #dark-mode-toggle.first-load {
        animation: pulse-once 0.5s ease-out;
    }

    /* Rotate animation on click */
    @keyframes rotate-icon {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    #dark-mode-toggle.rotating svg {
        animation: rotate-icon 0.5s ease-out;
    }

    /* Position adjustment for mobile bottom nav */
    @media (max-width: 767px) {
        #dark-mode-toggle {
            top: auto;
            bottom: 5rem;
            right: 1rem;
        }
    }

    /* Print mode - hide toggle */
    @media print {
        #dark-mode-toggle {
            display: none !important;
        }
    }
</style>

<script>
    // Add rotating animation on click
    document.addEventListener('DOMContentLoaded', () => {
        const toggle = document.getElementById('dark-mode-toggle');
        if (toggle) {
            toggle.addEventListener('click', () => {
                toggle.classList.add('rotating');
                setTimeout(() => {
                    toggle.classList.remove('rotating');
                }, 500);
            });

            // Pulse animation on first load to draw attention
            if (!localStorage.getItem('dark-mode-toggle-seen')) {
                setTimeout(() => {
                    toggle.classList.add('first-load');
                    setTimeout(() => {
                        toggle.classList.remove('first-load');
                        localStorage.setItem('dark-mode-toggle-seen', 'true');
                    }, 500);
                }, 1000);
            }
        }
    });
</script>

</body>
</html>
