<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Helper - Meal Plans</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
    </style>
    <script src="meals/plans.js"></script>
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen antialiased">

    <!-- Header -->
    <header class="bg-white shadow-sm border-b border-slate-200">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <div class="text-center">
                <h1 class="text-4xl font-extrabold text-slate-900 tracking-tight mb-2">
                    Shopping Helper
                </h1>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto mb-4">
                    Select which meal plans you're prepping this week
                </p>
                <a href="index.html" class="inline-flex items-center text-blue-600 hover:text-blue-800 font-semibold">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
                    </svg>
                    Back to Home
                </a>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">

        <!-- Instructions -->
        <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-8 rounded-r-lg">
            <div class="flex">
                <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                    </svg>
                </div>
                <div class="ml-3">
                    <p class="text-sm text-blue-700">
                        <strong>How to use:</strong> Select the meal plans you want to prep, then click the links below to view and print each shopping list. You can open multiple plans in new tabs to compare ingredients.
                    </p>
                </div>
            </div>
        </div>

        <!-- Plan Selection -->
        <div class="bg-white shadow rounded-xl p-6 mb-8">
            <h2 class="text-2xl font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">Select Your Meal Plans</h2>

            <div id="plan-checkboxes" class="space-y-3">
                <!-- Dynamically generated checkboxes -->
            </div>
        </div>

        <!-- Shopping Links -->
        <div id="shopping-links" class="bg-white shadow rounded-xl p-6 hidden">
            <h2 class="text-2xl font-bold text-slate-800 mb-4 border-b border-slate-100 pb-2">Your Shopping Lists</h2>

            <div class="mb-4">
                <p class="text-slate-600 text-sm mb-4">
                    Click on each link to view the shopping list. Use the "Print List" button on each page to get a printable version.
                </p>
            </div>

            <div id="selected-plans" class="space-y-3">
                <!-- Dynamically generated links -->
            </div>

            <div class="mt-6 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                <h3 class="font-semibold text-amber-900 mb-2 flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Shopping Tips
                </h3>
                <ul class="text-sm text-amber-800 space-y-1 ml-7">
                    <li>• Check your pantry before shopping to avoid duplicates</li>
                    <li>• Some ingredients (like soy sauce, garlic, ginger) appear in multiple plans</li>
                    <li>• Consider buying in bulk for common ingredients across weeks</li>
                    <li>• Fresh proteins should be used within 3-5 days or frozen</li>
                </ul>
            </div>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="text-center py-12 bg-white shadow rounded-xl">
            <svg class="w-16 h-16 mx-auto text-slate-300 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
            </svg>
            <p class="text-slate-500 text-lg">Select meal plans above to see your shopping lists</p>
        </div>

    </main>

    <footer class="text-center text-slate-400 text-sm py-8 mt-12">
        <p>Happy shopping and meal prepping!</p>
    </footer>

    <script>
        // Generate checkboxes for each meal plan
        function generatePlanCheckboxes() {
            const container = document.getElementById('plan-checkboxes');
            container.innerHTML = '';

            mealPlans.forEach(plan => {
                const checkbox = document.createElement('div');
                checkbox.className = 'flex items-center p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition';
                checkbox.innerHTML = `
                    <input
                        type="checkbox"
                        id="plan-${plan.file}"
                        value="${plan.file}"
                        onchange="updateShoppingLinks()"
                        class="w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 mr-3"
                    >
                    <label for="plan-${plan.file}" class="flex-1 cursor-pointer">
                        <span class="font-semibold text-slate-800">${plan.title}</span>
                        <span class="text-sm text-slate-500 ml-2">(${plan.subtitle})</span>
                    </label>
                `;
                container.appendChild(checkbox);
            });
        }

        // Update shopping links based on selected plans
        function updateShoppingLinks() {
            const checkboxes = document.querySelectorAll('#plan-checkboxes input[type="checkbox"]:checked');
            const shoppingLinks = document.getElementById('shopping-links');
            const emptyState = document.getElementById('empty-state');
            const selectedPlans = document.getElementById('selected-plans');

            if (checkboxes.length === 0) {
                shoppingLinks.classList.add('hidden');
                emptyState.classList.remove('hidden');
                return;
            }

            shoppingLinks.classList.remove('hidden');
            emptyState.classList.add('hidden');
            selectedPlans.innerHTML = '';

            checkboxes.forEach(checkbox => {
                const planFile = checkbox.value;
                const plan = mealPlans.find(p => p.file === planFile);

                if (plan) {
                    const linkCard = document.createElement('div');
                    linkCard.className = 'flex items-center justify-between p-4 bg-slate-50 rounded-lg border border-slate-200';
                    linkCard.innerHTML = `
                        <div>
                            <h3 class="font-bold text-slate-800">${plan.title}</h3>
                            <p class="text-sm text-slate-500">${plan.subtitle}</p>
                        </div>
                        <a
                            href="meals/${plan.file}#shopping-list"
                            target="_blank"
                            class="inline-flex items-center bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold text-sm transition"
                        >
                            View List
                            <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                            </svg>
                        </a>
                    `;
                    selectedPlans.appendChild(linkCard);
                }
            });
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', generatePlanCheckboxes);
    </script>

</body>
</html>
